/*

 FullCalendar v1.5.1
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sat Apr 9 14:09:51 2011 -0700

*/
(function(a,b){function d(e){a.extend(true,Xa,e)}function c(e,j,h){function p(){e.addClass("fc");j.isRTL&&e.addClass("fc-rtl");j.theme&&e.addClass("ui-widget");y=a("<div class='fc-content' style='position:relative'/>").prependTo(e);T=new f(da,j);(l=T.render())&&e.prepend(l);E(j.defaultView);a(window).resize(F);a("body")[0].offsetWidth!==0||o();var A=a(".fc-view-"+j.defaultView,e).height();setTimeout(function(){a(".fc-view-search",e).css("height",A).hide()},200)}function o(){setTimeout(function(){!t.start&&
a("body")[0].offsetWidth!==0&&z()},0)}function E(A){if(!t||A!=t.name){ha++;ua();var R=t,Z;if(R){(R.beforeHide||wb)();db(y,y.height());R.element.hide()}else db(y,1);y.css("overflow","hidden");if(t=Q[A])t.element.show();else t=Q[A]=new Qa[A](Z=pa=a("<div class='fc-view fc-view-"+A+"' style='position:absolute'/>").appendTo(y),da);a("#b_search_cal").hasClass("ui-state-active")&&a("#b_search_cal").trigger("click");R&&T.deactivateButton(R.name);T.activateButton(A);z();y.css("overflow","");R&&db(y,1);Z||
(t.afterShow||wb)();ha--}}function z(A){if(B.offsetWidth!==0){ha++;ua();ta===b&&G();var R=false;if(!t.start||A||ja<t.start||ja>=t.end){t.render(ja,A||0);v(true);R=true}else if(t.sizeDirty){t.clearEvents();v();R=true}else if(t.eventsDirty){t.clearEvents();R=true}t.sizeDirty=false;t.eventsDirty=false;A=R;if(!j.lazyFetching||W(t.visStart,t.visEnd))ga();else A&&na();ea=e.outerWidth();T.updateTitle(t.title);A=new Date;A>=t.start&&A<t.end?T.disableButton("today"):T.enableButton("today");ha--;t.trigger("viewDisplay",
B)}}function x(){w();if(B.offsetWidth!==0){G();v();ua();t.clearEvents();t.renderEvents(ra);t.sizeDirty=false}}function w(){a.each(Q,function(A,R){R.sizeDirty=true})}function G(){ta=j.contentHeight?j.contentHeight:j.height?j.height-(l?l.height():0)-ab(y):Math.round(y.width()/Math.max(j.aspectRatio,0.5))}function v(A){ha++;t.setHeight(ta,A);if(pa){pa.css("position","relative");pa=null}t.setWidth(y.width(),A);ha--}function F(){if(!ha)if(t.start){var A=++sa;setTimeout(function(){if(A==sa&&!ha&&B.offsetWidth!==
0)if(ea!=(ea=e.outerWidth())){ha++;x();t.trigger("windowResize",B);ha--}},200)}else o()}function ga(){N(t.visStart,t.visEnd)}function na(A){ka();if(B.offsetWidth!==0){t.clearEvents();t.renderEvents(ra,A);t.eventsDirty=false}}function ka(){a.each(Q,function(A,R){R.eventsDirty=true})}function ua(){t&&t.unselect()}var da=this;da.options=j;da.render=function(A){if(y){G();w();ka();z(A)}else p()};da.destroy=function(){a(window).unbind("resize",F);T.destroy();y.remove();e.removeClass("fc fc-rtl ui-widget")};
da.refetchEvents=ga;da.reportEvents=function(A){ra=A;na()};da.reportEventChange=function(A){na(A)};da.rerenderEvents=na;da.changeView=E;da.select=function(A,R,Z){t.select(A,R,Z===b?true:Z)};da.unselect=ua;da.prev=function(){z(-1)};da.next=function(){z(1)};da.prevYear=function(){i(ja,-1);z()};da.nextYear=function(){i(ja,1);z()};da.today=function(){ja=new Date;z()};da.gotoDate=function(A,R,Z){if(A instanceof Date)ja=m(A);else ba(ja,A,R,Z);z()};da.incrementDate=function(A,R,Z){A!==b&&i(ja,A);R!==b&&
n(ja,R);Z!==b&&k(ja,Z);z()};da.formatDate=function(A,R){return Da(A,R,j)};da.formatDates=function(A,R,Z){return Pa(A,R,Z,j)};da.getDate=function(){return m(ja)};da.getView=function(){return t};da.option=function(A,R){if(R===b)return j[A];if(A=="height"||A=="contentHeight"||A=="aspectRatio"){j[A]=R;x()}};da.trigger=function(A,R){if(j[A])return j[A].apply(R||B,Array.prototype.slice.call(arguments,2))};g.call(da,j,h);var W=da.isFetchNeeded,N=da.fetchEvents,B=e[0],T,l,y,t,Q={},ea,ta,pa,sa=0,ha=0,ja=new Date,
ra=[],Aa;ba(ja,j.year,j.month,j.date);j.droppable&&a(document).bind("dragstart",function(A,R){var Z=A.target,ia=a(Z);if(!ia.parents(".fc").length){var V=j.dropAccept;if(a.isFunction(V)?V.call(Z,ia):ia.is(V)){Aa=Z;t.dragStart(Aa,A,R)}}}).bind("dragstop",function(A,R){if(Aa){t.dragStop(Aa,A,R);Aa=null}})}function f(e,j){function h(E){var z=a("<td class='fc-header-"+E+"'/>");(E=j.header[E])&&a.each(E.split(" "),function(x){x>0&&z.append("<span class='fc-header-space'/>");var w;a.each(this.split(","),
function(G,v){if(v=="title"){z.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");w&&w.addClass(o+"-corner-right");w=null}else{var F;if(e[v])F=e[v];else if(Qa[v])F=function(){ka.removeClass(o+"-state-hover");e.changeView(v)};if(F){var ga=j.theme?jb(j.buttonIcons,v):null,na=jb(j.buttonText,v),ka=a("<span class='fc-button fc-button-"+v+" "+o+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(ga?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+ga+
"'/></span>":na)+"</span><span class='fc-button-effect'><span></span></span></span></span>");if(ka){ka.click(function(){ka.hasClass(o+"-state-disabled")||F()}).mousedown(function(){ka.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){ka.removeClass(o+"-state-down")}).hover(function(){ka.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){ka.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(z);
w||ka.addClass(o+"-corner-left");w=ka}}}});w&&w.addClass(o+"-corner-right")});return z}this.render=function(){o=j.theme?"ui":"fc";if(j.header)return p=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(h("left")).append(h("center")).append(h("right")))};this.destroy=function(){p.remove()};this.updateTitle=function(E){p.find("h2").html(E)};this.activateButton=function(E){p.find("span.fc-button-"+E).addClass(o+"-state-active")};this.deactivateButton=function(E){p.find("span.fc-button-"+
E).removeClass(o+"-state-active")};this.disableButton=function(E){p.find("span.fc-button-"+E).addClass(o+"-state-disabled")};this.enableButton=function(E){p.find("span.fc-button-"+E).removeClass(o+"-state-disabled")};var p=a([]),o}function g(e,j){function h(l,y){p(l,function(t){if(y==da){if(t){for(var Q=0;Q<t.length;Q++){t[Q].source=l;x(t[Q])}B=B.concat(t)}W--;W||F(B)}})}function p(l,y){var t,Q=Ka.sourceFetchers,ea;for(t=0;t<Q.length;t++){ea=Q[t](l,ka,ua,y);if(ea===true)return;else if(typeof ea==
"object"){p(ea,y);return}}if(t=l.events)if(a.isFunction(t)){E();t(m(ka),m(ua),function(ha){y(ha);z()})}else a.isArray(t)?y(t):y();else if(l.url){var ta=l.success,pa=l.error,sa=l.complete;t=a.extend({},l.data||{});Q=bb(l.startParam,e.startParam);ea=bb(l.endParam,e.endParam);if(Q)t[Q]=Math.round(+ka/1E3);if(ea)t[ea]=Math.round(+ua/1E3);E();a.ajax(a.extend({},Ib,l,{data:t,success:function(ha){ha=ha||[];var ja=eb(ta,this,arguments);if(a.isArray(ja))ha=ja;y(ha)},error:function(){eb(pa,this,arguments);
y()},complete:function(){eb(sa,this,arguments);z()}}))}else y()}function o(l){if(a.isFunction(l)||a.isArray(l))l={events:l};else if(typeof l=="string")l={url:l};if(typeof l=="object"){var y=l;if(y.className){if(typeof y.className=="string")y.className=y.className.split(/\s+/)}else y.className=[];for(var t=Ka.sourceNormalizers,Q=0;Q<t.length;Q++)t[Q](y);na.push(l);return l}}function E(){N++||G("loading",null,true)}function z(){--N||G("loading",null,false)}function x(l){var y=l.source||{},t=bb(y.ignoreTimezone,
e.ignoreTimezone);l._id=l._id||(l.id===b?"_fc"+Jb++:l.id+"");if(l.date){if(!l.start)l.start=l.date;delete l.date}l._start=m(l.start=ca(l.start,t));l.end=ca(l.end,t);if(l.end&&l.end<=l.start)l.end=null;l._end=l.end?m(l.end):null;if(l.allDay===b)l.allDay=bb(y.allDayDefault,e.allDayDefault);if(l.className){if(typeof l.className=="string")l.className=l.className.split(/\s+/)}else l.className=[]}function w(l){return(typeof l=="object"?l.events||l.url:"")||l}this.isFetchNeeded=function(l,y){return!ka||
l<ka||y>ua};this.fetchEvents=function(l,y){ka=l;ua=y;B=[];var t=++da,Q=na.length;W=Q;for(var ea=0;ea<Q;ea++)h(na[ea],t)};this.addEventSource=function(l){if(l=o(l)){W++;h(l,da)}};this.removeEventSource=function(l){na=a.grep(na,function(y){return!(y&&l&&w(y)==w(l))});B=a.grep(B,function(y){return!(y.source&&l&&w(y.source)==w(l))});F(B)};this.updateEvent=function(l){var y,t=B.length,Q,ea=v().defaultEventEnd,ta=l.start-l._start,pa=l.end?l.end-(l._end||ea(l)):0;for(y=0;y<t;y++){Q=B[y];if(Q._id==l._id&&
Q!=l){Q.start=new Date(+Q.start+ta);Q.end=l.end?Q.end?new Date(+Q.end+pa):new Date(+ea(Q)+pa):null;Q.title=l.title;Q.url=l.url;Q.allDay=l.allDay;Q.className=l.className;Q.editable=l.editable;Q.color=l.color;Q.backgroudColor=l.backgroudColor;Q.borderColor=l.borderColor;Q.textColor=l.textColor;x(Q)}}x(l);F(B)};this.renderEvent=function(l,y){x(l);if(!l.source){if(y){ga.events.push(l);l.source=ga}B.push(l)}F(B)};this.removeEvents=function(l){if(l){if(!a.isFunction(l)){var y=l+"";l=function(Q){return Q._id==
y}}B=a.grep(B,l,true);for(t=0;t<na.length;t++)if(a.isArray(na[t].events))na[t].events=a.grep(na[t].events,l,true)}else{B=[];for(var t=0;t<na.length;t++)if(a.isArray(na[t].events))na[t].events=[]}F(B)};this.clientEvents=function(l){if(a.isFunction(l))return a.grep(B,l);else if(l){l+="";return a.grep(B,function(y){return y._id==l})}return B};this.normalizeEvent=x;for(var G=this.trigger,v=this.getView,F=this.reportEvents,ga={events:[]},na=[ga],ka,ua,da=0,W=0,N=0,B=[],T=0;T<j.length;T++)o(j[T])}function i(e,
j,h){e.setFullYear(e.getFullYear()+j);h||I(e);return e}function n(e,j,h){if(+e){j=e.getMonth()+j;var p=m(e);p.setDate(1);p.setMonth(j);e.setMonth(j);for(h||I(e);e.getMonth()!=p.getMonth();)e.setDate(e.getDate()+(e<p?1:-1))}return e}function k(e,j,h){if(+e){j=e.getDate()+j;var p=m(e);p.setHours(9);p.setDate(j);e.setDate(j);h||I(e);P(e,p)}return e}function P(e,j){if(+e)for(;e.getDate()!=j.getDate();)e.setTime(+e+(e<j?1:-1)*Kb)}function s(e,j){e.setMinutes(e.getMinutes()+j);return e}function I(e){e.setHours(0);
e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);return e}function m(e,j){if(j)return I(new Date(+e));return new Date(+e)}function K(){var e=0,j;do j=new Date(1970,e++,1);while(j.getHours());return j}function L(e,j,h){for(j=j||1;!e.getDay()||h&&e.getDay()==1||!h&&e.getDay()==6;)k(e,j);return e}function Y(e,j){return Math.round((m(e,true)-m(j,true))/xb)}function ba(e,j,h,p){if(j!==b&&j!=e.getFullYear()){e.setDate(1);e.setMonth(0);e.setFullYear(j)}if(h!==b&&h!=e.getMonth()){e.setDate(1);e.setMonth(h)}p!==
b&&e.setDate(p)}function ca(e,j){if(typeof e=="object")return e;if(typeof e=="number")return new Date(e*1E3);if(typeof e=="string"){if(e.match(/^\d+(\.\d+)?$/))return new Date(parseFloat(e)*1E3);if(j===b)j=true;return Ca(e,j)||(e?new Date(e):null)}return null}function Ca(e,j){var h=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!h)return null;var p=new Date(h[1],0,1);if(j||!h[14]){var o=new Date(h[1],
0,1,9,0);if(h[3]){p.setMonth(h[3]-1);o.setMonth(h[3]-1)}if(h[5]){p.setDate(h[5]);o.setDate(h[5])}P(p,o);h[7]&&p.setHours(h[7]);h[8]&&p.setMinutes(h[8]);h[10]&&p.setSeconds(h[10]);h[12]&&p.setMilliseconds(Number("0."+h[12])*1E3);P(p,o)}else{p.setUTCFullYear(h[1],h[3]?h[3]-1:0,h[5]||1);p.setUTCHours(h[7]||0,h[8]||0,h[10]||0,h[12]?Number("0."+h[12])*1E3:0);o=Number(h[16])*60+(h[18]?Number(h[18]):0);o*=h[15]=="-"?1:-1;p=new Date(+p+o*6E4)}return p}function Ea(e){if(typeof e=="number")return e*60;if(typeof e==
"object")return e.getHours()*60+e.getMinutes();if(e=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var j=parseInt(e[1],10);if(e[3]){j%=12;if(e[3].toLowerCase().charAt(0)=="p")j+=12}return j*60+(e[2]?parseInt(e[2],10):0)}}function Da(e,j,h){return Pa(e,null,j,h)}function Pa(e,j,h,p){p=p||Xa;var o=e,E=j,z,x=h.length,w,G,v,F="";for(z=0;z<x;z++){w=h.charAt(z);if(w=="'")for(G=z+1;G<x;G++){if(h.charAt(G)=="'"){if(o){F+=G==z+1?"'":h.substring(z+1,G);z=G}break}}else if(w=="(")for(G=z+1;G<x;G++){if(h.charAt(G)==")"){z=
Da(o,h.substring(z+1,G),p);if(parseInt(z.replace(/\D/,""),10))F+=z;z=G;break}}else if(w=="[")for(G=z+1;G<x;G++){if(h.charAt(G)=="]"){w=h.substring(z+1,G);z=Da(o,w,p);if(z!=Da(E,w,p))F+=z;z=G;break}}else if(w=="{"){o=j;E=e}else if(w=="}"){o=e;E=j}else{for(G=x;G>z;G--)if(v=Lb[h.substring(z,G)]){if(o)F+=v(o,p);z=G-1;break}if(G==z)if(o)F+=w}}return F}function Ha(e){var j;if(e.end){j=e.end;e=e.allDay;j=m(j);j=e||j.getHours()||j.getMinutes()?k(j,1):I(j)}else j=k(m(e.start),1);return j}function Ra(e,j){return(j.msLength-
e.msLength)*100+(e.event.start-j.event.start)}function cb(e,j,h,p){var o=[],E,z=e.length,x,w,G,v,F;for(E=0;E<z;E++){x=e[E];w=x.start;G=j[E];if(G>h&&w<p){if(w<h){w=m(h);v=false}else v=true;if(G>p){G=m(p);F=false}else F=true;o.push({event:x,start:w,end:G,isStart:v,isEnd:F,msLength:G-w})}}return o.sort(Ra)}function Sa(e){var j=[],h,p=e.length,o,E,z,x;for(h=0;h<p;h++){o=e[h];for(E=0;;){z=false;if(j[E])for(x=0;x<j[E].length;x++)if(j[E][x].end>o.start&&j[E][x].start<o.end){z=true;break}if(z)E++;else break}if(j[E])j[E].push(o);
else j[E]=[o]}return j}function La(e,j,h){e.unbind("mouseover").mouseover(function(p){for(var o=p.target,E;o!=this;){E=o;o=o.parentNode}if((o=E._fci)!==b){E._fci=b;E=j[o];h(E.event,E.element,E);a(p.target).trigger(p)}p.stopPropagation()})}function Ta(e,j,h){for(var p=0,o;p<e.length;p++){o=a(e[p]);o.width(Math.max(0,j-(kb(o)+lb(o)+(h?mb(o):0))))}}function Ya(e,j,h){for(var p=0,o;p<e.length;p++){o=a(e[p]);o.height(Math.max(0,j-ab(o,h)))}}function kb(e){return(parseFloat(a.curCSS(e[0],"paddingLeft",
true))||0)+(parseFloat(a.curCSS(e[0],"paddingRight",true))||0)}function mb(e){return(parseFloat(a.curCSS(e[0],"marginLeft",true))||0)+(parseFloat(a.curCSS(e[0],"marginRight",true))||0)}function lb(e){return(parseFloat(a.curCSS(e[0],"borderLeftWidth",true))||0)+(parseFloat(a.curCSS(e[0],"borderRightWidth",true))||0)}function ab(e,j){return(parseFloat(a.curCSS(e[0],"paddingTop",true))||0)+(parseFloat(a.curCSS(e[0],"paddingBottom",true))||0)+((parseFloat(a.curCSS(e[0],"borderTopWidth",true))||0)+(parseFloat(a.curCSS(e[0],
"borderBottomWidth",true))||0))+(j?yb(e):0)}function yb(e){return(parseFloat(a.curCSS(e[0],"marginTop",true))||0)+(parseFloat(a.curCSS(e[0],"marginBottom",true))||0)}function db(e,j){j=typeof j=="number"?j+"px":j;e.each(function(h,p){p.style.cssText+=";min-height:"+j+";_height:"+j})}function wb(){}function zb(e,j){return e-j}function Za(e){return(e<10?"0":"")+e}function jb(e,j){if(e[j]!==b)return e[j];for(var h=j.split(/(?=[A-Z])/),p=h.length-1,o;p>=0;p--){o=e[h[p].toLowerCase()];if(o!==b)return o}return e[""]}
function $a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Ab(e){return e.id+"/"+e.className+"/"+e.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function fb(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function gb(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function nb(e,j){e.each(function(h,p){p.className=p.className.replace(/^fc-\w*/,"fc-"+Mb[j.getDay()])})}function Bb(e,j){var h=e.source||{},p=e.color,o=h.color,E=j("eventColor"),z=e.backgroundColor||p||h.backgroundColor||o||j("eventBackgroundColor")||E;p=e.borderColor||p||h.borderColor||o||j("eventBorderColor")||E;h=e.textColor||h.textColor||j("eventTextColor");o=[];z&&o.push("background-color:"+z);p&&o.push("border-color:"+p);h&&o.push("color:"+h);return o.join(";")}function eb(e,j,h){if(a.isFunction(e))e=
[e];if(e){var p,o;for(p=0;p<e.length;p++)o=e[p].apply(j,h)||o;return o}}function bb(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==b)return arguments[e]}function Nb(e,j,h){function p(){var O=I(new Date),H;y.each(function(q,r){if(!v.curYear)v.curYear=v.start;var D=m(v.start);D.setFullYear(D.getFullYear(),q,1);D.setFullYear(D.getFullYear(),q,1-D.getDay());a(r).find("td").each(function(u,C){var S;H=a(C);if(D.getMonth()==q){H.removeClass("fc-other-month");S=W(D,"-yyyy-MM-dd")}else{H.addClass("fc-other-month");
S=" ui-state-disabled"}+D==+O&&D.getMonth()==q?H.addClass(fa+"-state-highlight fc-today"):H.removeClass(fa+"-state-highlight fc-today");var M=H.find("div.fc-day-number");M.text(D.getDate());M.parent().parent().addClass(fa+"-widget-content fc-day"+S);k(D,1)})});l.filter(".fc-year-have-event").removeClass("fc-year-have-event ui-state-default")}function o(O){if(F("selectable")){var H=this.className.search("fc-day-");if(H!=-1){H=this.className.substring(H+7,H+7+10);H=H.split("-");H=new Date(H[0],parseInt(H[1])-
1,H[2],0,0,0);ga("reportDayClick",this,H,true,O)}}}function E(O,H,q){q&&ja.build();q=m(v.visStart);for(var r=k(m(q),ha),D=0;D<sa;D++){var u=new Date(Math.max(q,O)),C=new Date(Math.min(r,H));if(u<C){var S;if(A){S=Y(C,q)*R+Z+1;u=Y(u,q)*R+Z+1}else{S=Y(u,q);u=Y(C,q)}z(D,S,D,u-1).click(o).mousedown(da)}k(q,7);k(r,7)}}function z(O,H,q,r){O=ja.rect(O,H,q,r,e);return ka(O,e)}function x(O){return{row:Math.floor(Y(O,v.visStart)/7),col:G(O.getDay())}}function w(O){return k(m(v.visStart),O.row*7+O.col*R+Z)}function G(O){return(O-
Math.max(ia,V)+ha)%ha*R+Z}var v=this;v.renderYear=function(O,H,q,r){sa=H;ha=q;if(A=F("isRTL")){R=-1;Z=ha-1}else{R=1;Z=0}ia=F("firstDay");V=F("weekends")?0:1;fa=F("theme")?"ui":"fc";colFormat=F("columnFormat");if(O=!N){q=fa+"-widget-header";var D=fa+"-widget-content",u,C,S,M=m(v.start),$=Xa.dayNamesShortest,la=Xa.monthNames;H="<table class='fc-border-separate fc-year-main-table' style='width:100%'><tr >";for(var ma=0;ma<12;ma++){M.setFullYear(M.getFullYear(),ma,1);M.setFullYear(M.getFullYear(),ma,
1-M.getDay());if(ma%3==0&&ma>0)H+="</tr><tr>";H+="<td class='fc-year-monthly-td ui-widget'>";H+="<table class='ui-widget' style='width:100%' cellspacing='0'><thead><tr><th colspan='7' class='fc-year-monthly-header "+q+"' style='height:18px'>"+la[ma]+"</th></tr><tr>";for(u=0;u<ha;u++)H+="<th class='fc-year-month-weekly-head'>"+$[u]+"</th>";H+="</tr></thead><tbody>";for(u=0;u<6;u++){H+="<tr class='ui-widget-content fc-week"+u+"'>";for(C=0;C<ha;C++){S=M.getMonth()==ma?W(M,"-yyyy-MM-dd"):"";H+="<td style='height:32px' class='fc- "+
D+" fc-day"+S+"'><div>"+(r?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'></div></div></td>";k(M,1)}H+="</tr>"}H+="</tbody></table>";H+="</td>"}H+="</tr></table>";N=a(H).appendTo(e);B=N.find("thead");T=B.find("th");y=N.find("table");l=N.find("table tr td");l.click(o).mousedown(da);Q=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}else na();p(O)};v.setHeight=function(O){ta=O;O=ta-B.height();N.parent().height(O).css("overflow-y","auto")};v.setWidth=function(){};
v.renderDayOverlay=E;v.defaultSelectionEnd=function(O){return m(O)};v.renderSelection=function(O,H){E(O,k(m(H),1),true)};v.clearSelection=function(){ua()};v.reportDayClick=function(O,H,q){var r=x(O);ga("dayClick",t[r.row*ha+r.col],O,H,q)};v.dragStart=function(O,H){ra.start(function(q){ua();q&&z(q.row,q.col,q.row,q.col)},H)};v.dragStop=function(O,H,q){var r=ra.stop();ua();if(r){r=w(r);ga("drop",O,r,true,H,q)}};v.defaultEventEnd=function(O){return m(O.start)};v.getHoverListener=function(){return ra};
v.colContentLeft=function(O){return Aa.left(O)};v.colContentRight=function(O){return Aa.right(O)};v.dayOfWeekCol=G;v.dateCell=x;v.cellDate=w;v.cellIsAllDay=function(){return true};v.allDayRow=function(O){return l.eq(O)};v.allDayBounds=function(){return{left:0,right:ea}};v.getRowCnt=function(){return sa};v.getColCnt=function(){return ha};v.getColWidth=function(){return pa};v.getBodyRows=function(){return l};v.getDaySegmentContainer=function(){return Q};ob.call(v,e,j,h);pb.call(v);qb.call(v);Ob.call(v);
var F=v.opt,ga=v.trigger,na=v.clearEvents,ka=v.renderOverlay,ua=v.clearOverlays,da=v.daySelectionMousedown,W=j.formatDate,N,B,T,l,y,t,Q,ea,ta,pa,sa,ha,ja,ra,Aa,A,R,Z,ia,V,fa;fb(e.addClass("fc-grid"));ja=new rb(function(O,H){var q,r,D;T.each(function(u,C){q=a(C);r=q.offset().left;if(u)D[1]=r;D=[r];H[u]=D});D[1]=r+q.outerWidth();l.each(function(u,C){if(u<sa){q=a(C);r=q.offset().top;if(u)D[1]=r;D=[r];O[u]=D}});D[1]=r+q.outerHeight()});ra=new sb(ja);Aa=new tb(function(O){return bodyCellTopInners.eq(O)})}
function Ob(){function e(B){var T=m(h.visStart),l=m(h.visEnd),y,t,Q=[];y=a.map(B,Ha);t=[];var ea,ta=B.length,pa,sa,ha,ja,ra;for(ea=0;ea<ta;ea++){pa=B[ea];sa=pa.start;ha=y[ea];if(ha>T&&sa<l){if(sa<T){sa=m(T);ja=false}else ja=true;if(ha>l){ha=m(l);ra=false}else ra=true;t.push({event:pa,start:sa,end:ha,isStart:ja,isEnd:ra,msLength:ha-sa})}}T=t.sort(Ra);B=[];y=T.length;for(l=0;l<y;l++){t=T[l];for(ea=0;;){ta=false;if(B[ea])for(pa=0;pa<B[ea].length;pa++)if(B[ea][pa].end>t.start&&B[ea][pa].start<t.end){ta=
true;break}if(ta)ea++;else break}if(B[ea])B[ea].push(t);else B[ea]=[t]}for(T=0;T<B.length;T++){l=B[T];for(y=0;y<l.length;y++){t=l[y];t.row=void 0;t.level=T;Q.push(t)}}return Q}function j(B,T){var l=ka(),y;T.draggable({zIndex:9,delay:50,opacity:p("dragOpacity"),revertDuration:p("dragRevertDuration"),start:function(t,Q){o("eventDragStart",T,B,t,Q);F(B,T);l.start(function(ea,ta,pa,sa){T.draggable("option","revert",!ea||!pa&&!sa);da();if(ea){y=pa*7+sa*(p("isRTL")?-1:1);ua(k(m(B.start),y),k(Ha(B),y))}else y=
0},t,"drag")},stop:function(t,Q){l.stop();da();o("eventDragStop",T,B,t,Q);if(y)ga(this,B,y,0,B.allDay,t,Q);else{T.css("filter","");v(B,T)}}})}var h=this;h.renderEvents=function(B){x(B);B=e(B);try{var T=W();a("div.fc-day-content",T).html("");T.filter("td.fc-year-have-event").removeClass("fc-year-have-event ui-state-default");for(var l,y=0;y<B.length;y++)for(var t=m(B[y].start);t.getTime()<B[y].end.getTime();){l=T.filter(".fc-day-"+Da(B[y].start,"yyyy-MM-dd"));l.addClass("fc-year-have-event ui-state-default");
var Q=a("div.fc-day-content",l).html();a.trim(Q)!=""?a("div.fc-day-content",l).html(parseInt(Q)+1):a("div.fc-day-content",l).html("1");k(t,1)}}catch(ea){alert("MyrenderDaySegs:"+ea)}};h.compileDaySegs=e;h.clearEvents=function(){w();na().empty()};h.bindDaySeg=function(B,T,l){E(B)&&j(B,T);l.isEnd&&z(B)&&N(B,T,l);G(B,T)};ub.call(h);var p=h.opt,o=h.trigger,E=h.isEventDraggable,z=h.isEventResizable,x=h.reportEvents,w=h.reportEventClear,G=h.eventElementHandlers,v=h.showEvents,F=h.hideEvents,ga=h.eventDrop,
na=h.getDaySegmentContainer,ka=h.getHoverListener,ua=h.renderDayOverlay,da=h.clearOverlays,W=h.getBodyRows,N=h.resizableDayEvent}function vb(e,j,h){function p(r){var D=r||ja==1,u=F.start.getMonth(),C=I(new Date),S,M,$;D&&T.each(function(la,ma){S=a(ma);M=G(la);S.html(N(M,q));nb(S,M)});t.each(function(la,ma){S=a(ma);M=G(la);M.getMonth()==u?S.removeClass("fc-other-month"):S.addClass("fc-other-month");+M==+C?S.addClass(H+"-state-highlight fc-today"):S.removeClass(H+"-state-highlight fc-today");S.find("div.fc-day-number").text(M.getDate());
D&&nb(S,M)});y.each(function(la,ma){$=a(ma);if(la<ja){$.show();la==ja-1?$.addClass("fc-last"):$.removeClass("fc-last")}else $.hide()})}function o(r){if(!ga("selectable")){var D=parseInt(this.className.match(/fc\-day(\d+)/)[1]);D=G(D);na("dayClick",this,D,true,r)}}function E(r,D,u){u&&Aa.build();u=m(F.visStart);for(var C=k(m(u),ra),S=0;S<ja;S++){var M=new Date(Math.max(u,r)),$=new Date(Math.min(C,D));if(M<$){var la;if(Z){la=Y($,u)*ia+V+1;M=Y(M,u)*ia+V+1}else{la=Y(M,u);M=Y($,u)}z(S,la,S,M-1).click(o).mousedown(W)}k(u,
7);k(C,7)}}function z(r,D,u,C){r=Aa.rect(r,D,u,C,e);return ua(r,e)}function x(r){return{row:Math.floor(Y(r,F.visStart)/7),col:v(r.getDay())}}function w(r){return k(m(F.visStart),r.row*7+r.col*ia+V)}function G(r){return k(m(F.visStart),Math.floor(r/ra)*7+r%ra*ia+V)}function v(r){return(r-Math.max(fa,O)+ra)%ra*ia+V}var F=this;F.renderBasic=function(r,D,u,C){ja=D;ra=u;if(Z=ga("isRTL")){ia=-1;V=ra-1}else{ia=1;V=0}fa=ga("firstDay");O=ga("weekends")?0:1;H=ga("theme")?"ui":"fc";q=ga("columnFormat");if(D=
!l){var S=H+"-widget-header",M=H+"-widget-content",$;u="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for($=0;$<ra;$++)u+="<th class='fc- "+S+"'/>";u+="</tr></thead><tbody>";for($=0;$<r;$++){u+="<tr class='fc-week"+$+"'>";for(S=0;S<ra;S++)u+="<td class='fc- "+M+" fc-day"+($*ra+S)+"'><div>"+(C?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";u+="</tr>"}u+="</tbody></table>";r=a(u).appendTo(e);
B=r.find("thead");T=B.find("th");l=r.find("tbody");y=l.find("tr");t=l.find("td");Q=t.filter(":first-child");ea=y.eq(0).find("div.fc-day-content div");gb(B.add(B.find("tr")));gb(y);y.eq(0).addClass("fc-first");t.click(o).mousedown(W);ta=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}else ka();p(D)};F.setHeight=function(r){sa=r;r=sa-B.height();var D,u,C;if(ga("weekMode")=="variable")D=u=Math.floor(r/(ja==1?2:6));else{D=Math.floor(r/ja);u=r-D*(ja-1)}Q.each(function(S,M){if(S<
ja){C=a(M);db(C.find("> div"),(S==ja-1?u:D)-ab(C))}})};F.setWidth=function(r){pa=r;R.clear();ha=Math.floor(pa/ra);Ta(T.slice(0,-1),ha)};F.renderDayOverlay=E;F.defaultSelectionEnd=function(r){return m(r)};F.renderSelection=function(r,D){E(r,k(m(D),1),true)};F.clearSelection=function(){da()};F.reportDayClick=function(r,D,u){var C=x(r);na("dayClick",t[C.row*ra+C.col],r,D,u)};F.dragStart=function(r,D){A.start(function(u){da();u&&z(u.row,u.col,u.row,u.col)},D)};F.dragStop=function(r,D,u){var C=A.stop();
da();if(C){C=w(C);na("drop",r,C,true,D,u)}};F.defaultEventEnd=function(r){return m(r.start)};F.getHoverListener=function(){return A};F.colContentLeft=function(r){return R.left(r)};F.colContentRight=function(r){return R.right(r)};F.dayOfWeekCol=v;F.dateCell=x;F.cellDate=w;F.cellIsAllDay=function(){return true};F.allDayRow=function(r){return y.eq(r)};F.allDayBounds=function(){return{left:0,right:pa}};F.getRowCnt=function(){return ja};F.getColCnt=function(){return ra};F.getColWidth=function(){return ha};
F.getDaySegmentContainer=function(){return ta};ob.call(F,e,j,h);pb.call(F);qb.call(F);Pb.call(F);var ga=F.opt,na=F.trigger,ka=F.clearEvents,ua=F.renderOverlay,da=F.clearOverlays,W=F.daySelectionMousedown,N=j.formatDate,B,T,l,y,t,Q,ea,ta,pa,sa,ha,ja,ra,Aa,A,R,Z,ia,V,fa,O,H,q;fb(e.addClass("fc-grid"));Aa=new rb(function(r,D){var u,C,S;T.each(function(M,$){u=a($);C=u.offset().left;if(M)S[1]=C;S=[C];D[M]=S});S[1]=C+u.outerWidth();y.each(function(M,$){if(M<ja){u=a($);C=u.offset().top;if(M)S[1]=C;S=[C];
r[M]=S}});S[1]=C+u.outerHeight()});A=new sb(Aa);R=new tb(function(r){return ea.eq(r)})}function Pb(){function e(l){var y=W(),t=N(),Q=m(h.visStart);t=k(m(Q),t);var ea=a.map(l,Ha),ta,pa,sa,ha,ja,ra,Aa=[];for(ta=0;ta<y;ta++){pa=Sa(cb(l,ea,Q,t));for(sa=0;sa<pa.length;sa++){ha=pa[sa];for(ja=0;ja<ha.length;ja++){ra=ha[ja];ra.row=ta;ra.level=sa;Aa.push(ra)}}k(Q,7);k(t,7)}return Aa}function j(l,y){var t=ka(),Q;y.draggable({zIndex:9,delay:50,opacity:p("dragOpacity"),revertDuration:p("dragRevertDuration"),
start:function(ea,ta){o("eventDragStart",y,l,ea,ta);F(l,y);t.start(function(pa,sa,ha,ja){y.draggable("option","revert",!pa||!ha&&!ja);da();if(pa){Q=ha*7+ja*(p("isRTL")?-1:1);ua(k(m(l.start),Q),k(Ha(l),Q))}else Q=0},ea,"drag")},stop:function(ea,ta){t.stop();da();o("eventDragStop",y,l,ea,ta);if(Q)ga(this,l,Q,0,l.allDay,ea,ta);else{y.css("filter","");v(l,y)}}})}var h=this;h.renderEvents=function(l,y){x(l);B(e(l),y)};h.compileDaySegs=e;h.clearEvents=function(){w();na().empty()};h.bindDaySeg=function(l,
y,t){E(l)&&j(l,y);t.isEnd&&z(l)&&T(l,y,t);G(l,y)};ub.call(h);var p=h.opt,o=h.trigger,E=h.isEventDraggable,z=h.isEventResizable,x=h.reportEvents,w=h.reportEventClear,G=h.eventElementHandlers,v=h.showEvents,F=h.hideEvents,ga=h.eventDrop,na=h.getDaySegmentContainer,ka=h.getHoverListener,ua=h.renderDayOverlay,da=h.clearOverlays,W=h.getRowCnt,N=h.getColCnt,B=h.renderDaySegs,T=h.resizableDayEvent}function Cb(e,j,h){function p(){function J(){H.scrollTop(X)}var aa=K(),U=m(aa);U.setHours(N("firstHour"));var X=
ga(aa,U)+1;J();setTimeout(J,0)}function o(J){if(!N("selectable")){var aa=Math.min(qa-1,Math.floor((J.pageX-sa.offset().left-ma)/oa)),U=G(aa),X=this.parentNode.className.match(/fc-slot(\d+)/);if(X){X=parseInt(X[1])*N("slotMinutes");U.setHours(Math.floor(X/60));U.setMinutes(X%60+Wa);B("dayClick",Aa[aa],U,false,J)}else B("dayClick",Aa[aa],U,true,J)}}function E(J,aa,U){U&&va.build();var X=m(W.visStart);if(Db){U=Y(aa,X)*Ua+Va+1;J=Y(J,X)*Ua+Va+1}else{U=Y(J,X);J=Y(aa,X)}U=Math.max(0,U);J=Math.min(qa,J);
U<J&&z(0,U,0,J-1).click(o).mousedown(ea)}function z(J,aa,U,X){J=va.rect(J,aa,U,X,ia);return l(J,ia)}function x(J,aa){for(var U=m(W.visStart),X=k(m(U),1),ya=0;ya<qa;ya++){var Ga=new Date(Math.max(U,J)),Ma=new Date(Math.min(X,aa));if(Ga<Ma){var Oa=ya*Ua+Va;Oa=va.rect(0,Oa,0,Oa,q);Ga=ga(U,Ga);Ma=ga(U,Ma);Oa.top=Ga;Oa.height=Ma-Ga;l(Oa,q).click(o).mousedown(ua)}k(U,1);k(X,1)}}function w(J){var aa=G(J.col);J=J.row;N("allDaySlot")&&J--;J>=0&&s(aa,Wa+J*N("slotMinutes"));return aa}function G(J){return k(m(W.visStart),
J*Ua+Va)}function v(J){return N("allDaySlot")&&!J.row}function F(J){return(J-Math.max(Eb,Fb)+qa)%qa*Ua+Va}function ga(J,aa){J=m(J,true);if(aa<s(m(J),Wa))return 0;if(aa>=s(m(J),hb))return D.height();var U=N("slotMinutes"),X=aa.getHours()*60+aa.getMinutes()-Wa,ya=Math.floor(X/U),Ga=Na[ya];if(Ga===b)Ga=Na[ya]=D.find("tr:eq("+ya+") td div")[0].offsetTop;return Math.max(0,Math.round(Ga-1+wa*(X%U/U)))}function na(J,aa){var U=N("selectHelper");va.build();if(U){var X=Y(J,W.visStart)*Ua+Va;if(X>=0&&X<qa){X=
va.rect(0,X,0,X,q);var ya=ga(J,J),Ga=ga(J,aa);if(Ga>ya){X.top=ya;X.height=Ga-ya;X.left+=2;X.width-=5;if(a.isFunction(U)){if(U=U(J,aa)){X.position="absolute";X.zIndex=8;M=a(U).css(X).appendTo(q)}}else{X.isStart=true;X.isEnd=true;M=a(ta({title:"",start:J,end:aa,className:["fc-select-helper"],editable:false},X));M.css("opacity",N("dragOpacity"))}if(M){M.click(o).mousedown(ua);q.append(M);Ta(M,X.width,true);Ya(M,X.height,true)}}}}else x(J,aa)}function ka(){y();if(M){M.remove();M=null}}function ua(J){if(J.which==
1&&N("selectable")){Q(J);var aa;xa.start(function(U,X){ka();if(U&&U.col==X.col&&!v(U)){var ya=w(X),Ga=w(U);aa=[ya,s(m(ya),N("slotMinutes")),Ga,s(m(Ga),N("slotMinutes"))].sort(zb);na(aa[0],aa[3])}else aa=null},J);a(document).one("mouseup",function(U){xa.stop();if(aa){+aa[0]==+aa[1]&&da(aa[0],false,U);t(aa[0],aa[3],false,U)}})}}function da(J,aa,U){B("dayClick",Aa[F(J.getDay())],J,aa,U)}var W=this;W.renderAgenda=function(J){qa=J;Ia=N("theme")?"ui":"fc";Fb=N("weekends")?0:1;Eb=N("firstDay");if(Db=N("isRTL")){Ua=
-1;Va=qa-1}else{Ua=1;Va=0}Wa=Ea(N("minTime"));hb=Ea(N("maxTime"));Gb=N("columnFormat");if(sa)T();else{J=Ia+"-widget-header";var aa=Ia+"-widget-content",U,X,ya,Ga,Ma,Oa=N("slotMinutes")%15==0;U="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+J+"'>&nbsp;</th>";for(X=0;X<qa;X++)U+="<th class='fc- fc-col"+X+" "+J+"'/>";U+="<th class='fc-agenda-gutter "+J+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+J+"'>&nbsp;</th>";
for(X=0;X<qa;X++)U+="<td class='fc- fc-col"+X+" "+aa+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";U+="<td class='fc-agenda-gutter "+aa+"'>&nbsp;</td></tr></tbody></table>";sa=a(U).appendTo(e);ha=sa.find("thead");ja=ha.find("th").slice(1,-1);ra=sa.find("tbody");Aa=ra.find("td").slice(0,-1);A=Aa.find("div.fc-day-content div");R=Aa.eq(0);Z=R.find("> div");gb(ha.add(ha.find("tr")));gb(ra.add(ra.find("tr")));C=ha.find("th:first");S=sa.find(".fc-agenda-gutter");
ia=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(e);if(N("allDaySlot")){V=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ia);U="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+J+" fc-agenda-axis'>"+N("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+J+" fc-agenda-gutter'>&nbsp;</th></tr></table>";fa=a(U).appendTo(ia);O=fa.find("tr");O.find("td").click(o).mousedown(ea);
C=C.add(fa.find("th:first"));S=S.add(fa.find("th.fc-agenda-gutter"));ia.append("<div class='fc-agenda-divider "+J+"'><div class='fc-agenda-divider-inner'/></div>")}else V=a([]);H=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ia);q=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(H);r=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(q);U="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";
ya=K();Ga=s(m(ya),hb);s(ya,Wa);for(X=Ba=0;ya<Ga;X++){Ma=ya.getMinutes();U+="<tr class='fc-slot"+X+" "+(!Ma?"":"fc-minor")+"'><th class='fc-agenda-axis "+J+"'>"+(!Oa||!Ma?pa(ya,N("axisFormat")):"&nbsp;")+"</th><td class='"+aa+"'><div style='position:relative'>&nbsp;</div></td></tr>";s(ya,N("slotMinutes"));Ba++}U+="</tbody></table>";D=a(U).appendTo(q);u=D.find("div:first");D.find("td").click(o).mousedown(ua);C=C.add(D.find("th:first"))}ya=I(new Date);for(J=0;J<qa;J++){X=G(J);aa=ja.eq(J);aa.html(pa(X,
Gb));U=Aa.eq(J);+X==+ya?U.addClass(Ia+"-state-highlight fc-today"):U.removeClass(Ia+"-state-highlight fc-today");nb(aa.add(U),X)}};W.setWidth=function(J){$=J;Ja.clear();ma=0;Ta(C.width("").each(function(aa,U){ma=Math.max(ma,a(U).outerWidth())}),ma);J=H[0].clientWidth;if(Fa=H.width()-J){Ta(S,Fa);S.show().prev().removeClass("fc-last")}else S.hide().prev().addClass("fc-last");oa=Math.floor((J-ma)/qa);Ta(ja.slice(0,-1),oa)};W.setHeight=function(J,aa){if(J===b)J=la;la=J;Na={};var U=ra.position().top,X=
H.position().top,ya=Math.min(J-U,D.height()+X+1);Z.height(ya-ab(R));ia.css("top",U);H.height(ya-X-1);wa=u.height()+1;aa&&p()};W.beforeHide=function(){za=H.scrollTop()};W.afterShow=function(){H.scrollTop(za)};W.defaultEventEnd=function(J){var aa=m(J.start);if(J.allDay)return aa;return s(aa,N("defaultEventMinutes"))};W.timePosition=ga;W.dayOfWeekCol=F;W.dateCell=function(J){return{row:Math.floor(Y(J,W.visStart)/7),col:F(J.getDay())}};W.cellDate=w;W.cellIsAllDay=v;W.allDayRow=function(){return O};W.allDayBounds=
function(){return{left:ma,right:$-Fa}};W.getHoverListener=function(){return xa};W.colContentLeft=function(J){return Ja.left(J)};W.colContentRight=function(J){return Ja.right(J)};W.getDaySegmentContainer=function(){return V};W.getSlotSegmentContainer=function(){return r};W.getMinMinute=function(){return Wa};W.getMaxMinute=function(){return hb};W.getBodyContent=function(){return q};W.getRowCnt=function(){return 1};W.getColCnt=function(){return qa};W.getColWidth=function(){return oa};W.getSlotHeight=
function(){return wa};W.defaultSelectionEnd=function(J,aa){if(aa)return m(J);return s(m(J),N("slotMinutes"))};W.renderDayOverlay=E;W.renderSelection=function(J,aa,U){if(U)N("allDaySlot")&&E(J,k(m(aa),1),true);else na(J,aa)};W.clearSelection=ka;W.reportDayClick=da;W.dragStart=function(J,aa){xa.start(function(U){y();if(U)if(v(U))z(U.row,U.col,U.row,U.col);else{U=w(U);var X=s(m(U),N("defaultEventMinutes"));x(U,X)}},aa)};W.dragStop=function(J,aa,U){var X=xa.stop();y();X&&B("drop",J,w(X),v(X),aa,U)};ob.call(W,
e,j,h);pb.call(W);qb.call(W);Qb.call(W);var N=W.opt,B=W.trigger,T=W.clearEvents,l=W.renderOverlay,y=W.clearOverlays,t=W.reportSelection,Q=W.unselect,ea=W.daySelectionMousedown,ta=W.slotSegHtml,pa=j.formatDate,sa,ha,ja,ra,Aa,A,R,Z,ia,V,fa,O,H,q,r,D,u,C,S,M,$,la,ma,oa,Fa,wa,za,qa,Ba,va,xa,Ja,Na={},Ia,Eb,Fb,Db,Ua,Va,Wa,hb,Gb;fb(e.addClass("fc-agenda"));va=new rb(function(J,aa){var U,X,ya;ja.each(function(Hb,Rb){U=a(Rb);X=U.offset().left;if(Hb)ya[1]=X;ya=[X];aa[Hb]=ya});ya[1]=X+U.outerWidth();if(N("allDaySlot")){U=
O;X=U.offset().top;J[0]=[X,X+U.outerHeight()]}for(var Ga=q.offset().top,Ma=H.offset().top,Oa=Ma+H.outerHeight(),ib=0;ib<Ba;ib++)J.push([Math.max(Ma,Math.min(Oa,Ga+wa*ib)),Math.max(Ma,Math.min(Oa,Ga+wa*(ib+1)))])});xa=new sb(va);Ja=new tb(function(J){return A.eq(J)})}function Qb(){function e(q){q=Sa(cb(q,a.map(q,Ha),x.visStart,x.visEnd));var r,D=q.length,u,C,S,M=[];for(r=0;r<D;r++){u=q[r];for(C=0;C<u.length;C++){S=u[C];S.row=0;S.level=r;M.push(S)}}return M}function j(q){return q.end?m(q.end):s(m(q.start),
w("defaultEventMinutes"))}function h(q,r){var D="<",u=q.url,C=Bb(q,w),S=C?" style='"+C+"'":"",M=["fc-event","fc-event-skin","fc-event-vert"];v(q)&&M.push("fc-event-draggable");r.isStart&&M.push("fc-corner-top");r.isEnd&&M.push("fc-corner-bottom");M=M.concat(q.className);if(q.source)M=M.concat(q.source.className||[]);D+=u?"a href='"+$a(q.url)+"'":"div";D+=" class='"+M.join(" ")+"' style='position:absolute;z-index:8;top:"+r.top+"px;left:"+r.left+"px;"+C+"'><div class='fc-event-inner fc-event-skin'"+
S+"><div class='fc-event-head fc-event-skin'"+S+"><div class='fc-event-time'>"+$a(H(q.start,q.end,w("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+$a(q.title)+"</div></div><div class='fc-event-bg'></div></div>";if(r.isEnd&&F(q))D+="<div class='ui-resizable-handle ui-resizable-s'>=</div>";D+="</"+(u?"a":"div")+">";return D}function p(q,r,D){var u=r.find("div.fc-event-time");v(q)&&E(q,r,u);D.isEnd&&F(q)&&z(q,r,u);ua(q,r)}function o(q,r,D){function u(){if(!M){r.width(C).height("").draggable("option",
"grid",null);M=true}}var C,S,M=true,$,la=w("isRTL")?-1:1,ma=B(),oa=sa(),Fa=ha(),wa=l();r.draggable({zIndex:9,opacity:w("dragOpacity","month"),revertDuration:w("dragRevertDuration"),start:function(za,qa){G("eventDragStart",r,q,za,qa);A(q,r);C=r.width();ma.start(function(Ba,va,xa,Ja){V();if(Ba){S=false;$=Ja*la;if(Ba.row)if(D){if(M){r.width(oa-10);Ya(r,Fa*Math.round((q.end?(q.end-q.start)/Sb:w("defaultEventMinutes"))/w("slotMinutes")));r.draggable("option","grid",[oa,1]);M=false}}else S=true;else{ia(k(m(q.start),
$),k(Ha(q),$));u()}S=S||M&&!$}else{u();S=true}r.draggable("option","revert",S)},za,"drag")},stop:function(za,qa){ma.stop();V();G("eventDragStop",r,q,za,qa);if(S){u();r.css("filter","");Aa(q,r)}else{var Ba=0;M||(Ba=Math.round((r.offset().top-ja().offset().top)/Fa)*w("slotMinutes")+wa-(q.start.getHours()*60+q.start.getMinutes()));R(this,q,$,Ba,M,za,qa)}}})}function E(q,r,D){function u(Ba){var va=s(m(q.start),Ba),xa;if(q.end)xa=s(m(q.end),Ba);D.text(H(va,xa,w("timeFormat")))}function C(){if(M){D.css("display",
"");r.draggable("option","grid",[za,qa]);M=false}}var S,M=false,$,la,ma,oa=w("isRTL")?-1:1,Fa=B(),wa=pa(),za=sa(),qa=ha();r.draggable({zIndex:9,scroll:false,grid:[za,qa],axis:wa==1?"y":false,opacity:w("dragOpacity"),revertDuration:w("dragRevertDuration"),start:function(Ba,va){G("eventDragStart",r,q,Ba,va);A(q,r);S=r.position();la=ma=0;Fa.start(function(xa,Ja,Na,Ia){r.draggable("option","revert",!xa);V();if(xa){$=Ia*oa;if(w("allDaySlot")&&!xa.row){if(!M){M=true;D.hide();r.draggable("option","grid",
null)}ia(k(m(q.start),$),k(Ha(q),$))}else C()}},Ba,"drag")},drag:function(Ba,va){la=Math.round((va.position.top-S.top)/qa)*w("slotMinutes");if(la!=ma){M||u(la);ma=la}},stop:function(Ba,va){var xa=Fa.stop();V();G("eventDragStop",r,q,Ba,va);if(xa&&($||la||M))R(this,q,$,M?0:la,M,Ba,va);else{C();r.css("filter","");r.css(S);u(0);Aa(q,r)}}})}function z(q,r,D){var u,C,S=ha();r.resizable({handles:{s:"div.ui-resizable-s"},grid:S,start:function(M,$){u=C=0;A(q,r);r.css("z-index",9);G("eventResizeStart",this,
q,M,$)},resize:function(M,$){u=Math.round((Math.max(S,r.height())-$.originalSize.height)/S);if(u!=C){D.text(H(q.start,!u&&!q.end?null:s(ga(q),w("slotMinutes")*u),w("timeFormat")));C=u}},stop:function(M,$){G("eventResizeStop",this,q,M,$);if(u)Z(this,q,0,w("slotMinutes")*u,M,$);else{r.css("z-index",8);Aa(q,r)}}})}var x=this;x.renderEvents=function(q,r){na(q);var D,u=q.length,C=[],S=[];for(D=0;D<u;D++)q[D].allDay?C.push(q[D]):S.push(q[D]);if(w("allDaySlot")){ea(e(C),r);da()}u=pa();C=l();var M=T(),$=
s(m(x.visStart),C),la=a.map(S,j),ma,oa,Fa,wa,za,qa;D=[];for(ma=0;ma<u;ma++){Fa=oa=Sa(cb(S,la,$,s(m($),M-C)));wa=void 0;za=void 0;qa=void 0;var Ba=void 0,va=void 0,xa=void 0;for(wa=Fa.length-1;wa>0;wa--){Ba=Fa[wa];for(za=0;za<Ba.length;za++){va=Ba[za];for(qa=0;qa<Fa[wa-1].length;qa++){xa=Fa[wa-1][qa];if(va.end>xa.start&&va.start<xa.end)xa.forward=Math.max(xa.forward||0,(va.forward||0)+1)}}}for(Fa=0;Fa<oa.length;Fa++){wa=oa[Fa];for(za=0;za<wa.length;za++){qa=wa[za];qa.col=ma;qa.level=Fa;D.push(qa)}}k($,
1,true)}S=D.length;var Ja,Na,Ia;oa="";M={};$={};ma=N();u=pa();if(Fa=w("isRTL")){wa=-1;Ba=u-1}else{wa=1;Ba=0}for(u=0;u<S;u++){C=D[u];la=C.event;za=y(C.start,C.start);qa=y(C.start,C.end);Ja=C.col;va=C.level;xa=C.forward||0;Na=t(Ja*wa+Ba);Ia=Q(Ja*wa+Ba)-Na;Ia=Math.min(Ia-6,Ia*0.95);Ja=va?Ia/(va+xa+1):xa?(Ia/(xa+1)-6)*2:Ia;va=Na+Ia/(va+xa+1)*va*wa+(Fa?Ia-Ja:0);C.top=za;C.left=va;C.outerWidth=Ja;C.outerHeight=qa-za;oa+=h(la,C)}ma[0].innerHTML=oa;Fa=ma.children();for(u=0;u<S;u++){C=D[u];la=C.event;oa=a(Fa[u]);
wa=G("eventRender",la,la,oa);if(wa===false)oa.remove();else{if(wa&&wa!==true){oa.remove();oa=a(wa).css({position:"absolute",top:C.top,left:C.left}).appendTo(ma)}C.element=oa;if(la._id===r)p(la,oa,C);else oa[0]._fci=u;ra(la,oa)}}La(ma,D,p);for(u=0;u<S;u++){C=D[u];if(oa=C.element){ma=M[la=C.key=Ab(oa[0])];C.vsides=ma===b?M[la]=ab(oa,true):ma;ma=$[la];C.hsides=ma===b?$[la]=kb(oa)+lb(oa)+mb(oa):ma;la=oa.find("div.fc-event-content");if(la.length)C.contentTop=la[0].offsetTop}}for(u=0;u<S;u++){C=D[u];if(oa=
C.element){oa[0].style.width=Math.max(0,C.outerWidth-C.hsides)+"px";M=Math.max(0,C.outerHeight-C.vsides);oa[0].style.height=M+"px";la=C.event;if(C.contentTop!==b&&M-C.contentTop<10){oa.find("div.fc-event-time").text(O(la.start,w("timeFormat"))+" - "+la.title);oa.find("div.fc-event-title").remove()}G("eventAfterRender",la,la,oa)}}};x.compileDaySegs=e;x.clearEvents=function(){ka();W().empty();N().empty()};x.slotSegHtml=h;x.bindDaySeg=function(q,r,D){v(q)&&o(q,r,D.isStart);D.isEnd&&F(q)&&ta(q,r,D);ua(q,
r)};ub.call(x);var w=x.opt,G=x.trigger,v=x.isEventDraggable,F=x.isEventResizable,ga=x.eventEnd,na=x.reportEvents,ka=x.reportEventClear,ua=x.eventElementHandlers,da=x.setHeight,W=x.getDaySegmentContainer,N=x.getSlotSegmentContainer,B=x.getHoverListener,T=x.getMaxMinute,l=x.getMinMinute,y=x.timePosition,t=x.colContentLeft,Q=x.colContentRight,ea=x.renderDaySegs,ta=x.resizableDayEvent,pa=x.getColCnt,sa=x.getColWidth,ha=x.getSlotHeight,ja=x.getBodyContent,ra=x.reportEventElement,Aa=x.showEvents,A=x.hideEvents,
R=x.eventDrop,Z=x.eventResize,ia=x.renderDayOverlay,V=x.clearOverlays,fa=x.calendar,O=fa.formatDate,H=fa.formatDates}function ob(e,j,h){function p(N,B){var T=W[N];if(typeof T=="object")return jb(T,B||h);return T}function o(N,B){return j.trigger.apply(j,[N,B||v].concat(Array.prototype.slice.call(arguments,2),[v]))}function E(N){return bb(N.editable,(N.source||{}).editable,p("editable"))}function z(N){return N.end?m(N.end):F(N)}function x(N,B,T){N=da[N._id];var l,y=N.length;for(l=0;l<y;l++)if(!B||N[l][0]!=
B[0])N[l][T]()}function w(N,B,T,l){T=T||0;for(var y,t=N.length,Q=0;Q<t;Q++){y=N[Q];if(l!==b)y.allDay=l;s(k(y.start,B,true),T);if(y.end)y.end=s(k(y.end,B,true),T);ga(y,W)}}function G(N,B,T){T=T||0;for(var l,y=N.length,t=0;t<y;t++){l=N[t];l.end=s(k(z(l),B,true),T);ga(l,W)}}var v=this;v.element=e;v.calendar=j;v.name=h;v.opt=p;v.trigger=o;v.isEventDraggable=function(N){return E(N)&&!p("disableDragging")};v.isEventResizable=function(N){return E(N)&&!p("disableResizing")};v.reportEvents=function(N){ka=
{};var B,T=N.length,l;for(B=0;B<T;B++){l=N[B];if(ka[l._id])ka[l._id].push(l);else ka[l._id]=[l]}};v.eventEnd=z;v.reportEventElement=function(N,B){ua.push(B);if(da[N._id])da[N._id].push(B);else da[N._id]=[B]};v.reportEventClear=function(){ua=[];da={}};v.eventElementHandlers=function(N,B){B.click(function(T){if(!B.hasClass("ui-draggable-dragging")&&!B.hasClass("ui-resizable-resizing"))return o("eventClick",this,N,T)}).hover(function(T){o("eventMouseover",this,N,T)},function(T){o("eventMouseout",this,
N,T)})};v.showEvents=function(N,B){x(N,B,"show")};v.hideEvents=function(N,B){x(N,B,"hide")};v.eventDrop=function(N,B,T,l,y,t,Q){var ea=B.allDay,ta=B._id;w(ka[ta],T,l,y);o("eventDrop",N,B,T,l,y,function(){w(ka[ta],-T,-l,ea);na(ta)},t,Q);na(ta)};v.eventResize=function(N,B,T,l,y,t){var Q=B._id;G(ka[Q],T,l);o("eventResize",N,B,T,l,function(){G(ka[Q],-T,-l);na(Q)},y,t);na(Q)};var F=v.defaultEventEnd,ga=j.normalizeEvent,na=j.reportEventChange,ka={},ua=[],da={},W=j.options}function ub(){function e(A){var R=
G("isRTL"),Z,ia=A.length,V,fa,O,H;Z=l();var q=Z.left,r=Z.right,D,u,C,S,M,$="";for(Z=0;Z<ia;Z++){V=A[Z];fa=V.event;H=["fc-event","fc-event-skin","fc-event-hori"];F(fa)&&H.push("fc-event-draggable");if(R){V.isStart&&H.push("fc-corner-right");V.isEnd&&H.push("fc-corner-left");D=Q(V.end.getDay()-1);u=Q(V.start.getDay());C=V.isEnd?y(D):q;S=V.isStart?t(u):r}else{V.isStart&&H.push("fc-corner-left");V.isEnd&&H.push("fc-corner-right");D=Q(V.start.getDay());u=Q(V.end.getDay()-1);C=V.isStart?y(D):q;S=V.isEnd?
t(u):r}H=H.concat(fa.className);if(fa.source)H=H.concat(fa.source.className||[]);O=fa.url;M=Bb(fa,G);$+=O?"<a href='"+$a(O)+"'":"<div";$+=" class='"+H.join(" ")+"' style='position:absolute;z-index:8;left:"+C+"px;"+M+"'><div class='fc-event-inner fc-event-skin'"+(M?" style='"+M+"'":"")+">";if(!fa.allDay&&V.isStart)$+="<span class='fc-event-time'>"+$a(ha(fa.start,fa.end,G("timeFormat")))+"</span>";$+="<span class='fc-event-title'>"+$a(fa.title)+"</span></div>";if(V.isEnd&&ga(fa))$+="<div class='ui-resizable-handle ui-resizable-"+
(R?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>";$+="</"+(O?"a":"div")+">";V.left=C;V.outerWidth=S-C;V.startCol=D;V.endCol=u+1}return $}function j(A,R){var Z,ia=A.length,V,fa,O;for(Z=0;Z<ia;Z++){V=A[Z];fa=V.event;O=a(R[Z]);fa=v("eventRender",fa,fa,O);if(fa===false)O.remove();else{if(fa&&fa!==true){fa=a(fa).css({position:"absolute",left:V.left});O.replaceWith(fa);O=fa}V.element=O}}}function h(A){var R,Z=A.length,ia,V,fa,O,H={};for(R=0;R<Z;R++){ia=A[R];if(V=ia.element){fa=ia.key=Ab(V[0]);O=H[fa];if(O===b)O=
H[fa]=kb(V)+lb(V)+mb(V);ia.hsides=O}}}function p(A){var R,Z=A.length,ia,V;for(R=0;R<Z;R++){ia=A[R];if(V=ia.element)V[0].style.width=Math.max(0,ia.outerWidth-ia.hsides)+"px"}}function o(A){var R,Z=A.length,ia,V,fa,O,H={};for(R=0;R<Z;R++){ia=A[R];if(V=ia.element){fa=ia.key;O=H[fa];if(O===b)O=H[fa]=yb(V);ia.outerHeight=V[0].offsetHeight+O}}}function E(){var A,R=N(),Z=[];for(A=0;A<R;A++)Z[A]=T(A).find("td:first div.fc-day-content > div");return Z}function z(A){var R,Z=A.length,ia=[];for(R=0;R<Z;R++)ia[R]=
A[R][0].offsetTop;return ia}function x(A,R){var Z,ia=A.length,V,fa;for(Z=0;Z<ia;Z++){V=A[Z];if(fa=V.element){fa[0].style.top=R[V.row]+(V.top||0)+"px";V=V.event;v("eventAfterRender",V,V,fa)}}}var w=this;w.renderDaySegs=function(A,R){var Z=pa(),ia=N(),V=B(),fa=0,O,H,q,r=A.length,D,u;Z[0].innerHTML=e(A);j(A,Z.children());H=A.length;for(O=0;O<H;O++){q=A[O];(u=q.element)&&ka(q.event,u)}H=A.length;var C;for(O=0;O<H;O++){q=A[O];if(u=q.element){C=q.event;if(C._id===R)sa(C,u,q);else u[0]._fci=O}}La(Z,A,sa);
h(A);p(A);o(A);Z=E();for(O=0;O<ia;O++){H=[];for(q=0;q<V;q++)H[q]=0;for(;fa<r&&(D=A[fa]).row==O;){q=H.slice(D.startCol,D.endCol);q=Math.max.apply(Math,q);D.top=q;q+=D.outerHeight;for(u=D.startCol;u<D.endCol;u++)H[u]=q;fa++}Z[O].height(Math.max.apply(Math,H))}x(A,z(Z))};w.resizableDayEvent=function(A,R,Z){var ia=G("isRTL"),V=ia?"w":"e",fa=R.find("div.ui-resizable-"+V),O=false;fb(R);R.mousedown(function(H){H.preventDefault()}).click(function(H){if(O){H.preventDefault();H.stopImmediatePropagation()}});
fa.mousedown(function(H){if(H.which==1){O=true;var q=w.getHoverListener(),r=N(),D=B(),u=ia?-1:1,C=ia?D-1:0,S=R.css("top"),M,$,la=a.extend({},A),ma=ea(A.start);Aa();a("body").css("cursor",V+"-resize").one("mouseup",function(oa){v("eventResizeStop",this,A,oa);a("body").css("cursor","");q.stop();ra();M&&W(this,A,M,0,oa);setTimeout(function(){O=false},0)});v("eventResizeStart",this,A,H);q.start(function(oa,Fa){if(oa){var wa=Math.max(ma.row,oa.row),za=oa.col;if(r==1)wa=0;if(wa==ma.row)za=ia?Math.min(ma.col,
za):Math.max(ma.col,za);M=wa*7+za*u+C-(Fa.row*7+Fa.col*u+C);wa=k(na(A),M,true);if(M){la.end=wa;za=$;var qa=ta([la]),Ba=Z.row,va=a("<div/>"),xa=pa(),Ja=qa.length,Na;va[0].innerHTML=e(qa);va=va.children();xa.append(va);j(qa,va);h(qa);p(qa);o(qa);x(qa,z(E()));va=[];for(xa=0;xa<Ja;xa++)if(Na=qa[xa].element){qa[xa].row===Ba&&Na.css("top",S);va.push(Na[0])}$=a(va);$.find("*").css("cursor",V+"-resize");za&&za.remove();da(A)}else if($){ua(A);$.remove();$=null}ra();ja(A.start,k(m(wa),1))}},H)}})};var G=w.opt,
v=w.trigger,F=w.isEventDraggable,ga=w.isEventResizable,na=w.eventEnd,ka=w.reportEventElement,ua=w.showEvents,da=w.hideEvents,W=w.eventResize,N=w.getRowCnt,B=w.getColCnt,T=w.allDayRow,l=w.allDayBounds,y=w.colContentLeft,t=w.colContentRight,Q=w.dayOfWeekCol,ea=w.dateCell,ta=w.compileDaySegs,pa=w.getDaySegmentContainer,sa=w.bindDaySeg,ha=w.calendar.formatDates,ja=w.renderDayOverlay,ra=w.clearOverlays,Aa=w.clearSelection}function qb(){function e(G){if(w){w=false;x();o("unselect",null,G)}}function j(G,
v,F,ga){w=true;o("select",null,G,v,F,ga)}var h=this;h.select=function(G,v,F){e();v||(v=E(G,F));z(G,v,F);j(G,v,F)};h.unselect=e;h.reportSelection=j;h.daySelectionMousedown=function(G){var v=h.cellDate,F=h.cellIsAllDay,ga=h.getHoverListener(),na=h.reportDayClick;if(G.which==1&&p("selectable")){e(G);var ka;ga.start(function(ua,da){x();if(ua&&F(ua)){ka=[v(da),v(ua)].sort(zb);z(ka[0],ka[1],true)}else ka=null},G);a(document).one("mouseup",function(ua){ga.stop();if(ka){+ka[0]==+ka[1]&&na(ka[0],true,ua);
j(ka[0],ka[1],true,ua)}})}};var p=h.opt,o=h.trigger,E=h.defaultSelectionEnd,z=h.renderSelection,x=h.clearSelection,w=false;p("selectable")&&p("unselectAuto")&&a(document).mousedown(function(G){var v=p("unselectCancel");if(v)if(a(G.target).parents(v).length)return;e(G)})}function pb(){this.renderOverlay=function(h,p){var o=j.shift();o||(o=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=p[0]&&o.appendTo(p);e.push(o.css(h).show());return o};this.clearOverlays=
function(){for(var h;h=e.shift();)j.push(h.hide().unbind())};var e=[],j=[]}function rb(e){var j,h;this.build=function(){j=[];h=[];e(j,h)};this.cell=function(p,o){var E=j.length,z=h.length,x,w=-1,G=-1;for(x=0;x<E;x++)if(o>=j[x][0]&&o<j[x][1]){w=x;break}for(x=0;x<z;x++)if(p>=h[x][0]&&p<h[x][1]){G=x;break}return w>=0&&G>=0?{row:w,col:G}:null};this.rect=function(p,o,E,z,x){x=x.offset();return{top:j[p][0]-x.top,left:h[o][0]-x.left,width:h[z][1]-h[o][0],height:j[E][1]-j[p][0]}}}function sb(e){function j(z){z=
e.cell(z.pageX,z.pageY);if(!z!=!E||z&&(z.row!=E.row||z.col!=E.col)){if(z){o||(o=z);p(z,o,z.row-o.row,z.col-o.col)}else p(z,o);E=z}}var h,p,o,E;this.start=function(z,x,w){p=z;o=E=null;e.build();j(x);h=w||"mousemove";a(document).bind(h,j)};this.stop=function(){a(document).unbind(h,j);return E}}function tb(e){var j=this,h={},p={},o={};j.left=function(E){return p[E]=p[E]===b?(h[E]=h[E]||e(E)).position().left:p[E]};j.right=function(E){return o[E]=o[E]===b?j.left(E)+(h[E]=h[E]||e(E)).width():o[E]};j.clear=
function(){h={};p={};o={}}}var Xa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{year:"yyyy",month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{year:"MMMM",month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March",
"April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesShortest:["S","M","T","W","T","F","S"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",
year:"year",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Tb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ka=a.fullCalendar={version:"1.5.1"},Qa=Ka.views={};a.fn.fullCalendar=function(e){if(typeof e==
"string"){var j=Array.prototype.slice.call(arguments,1),h;this.each(function(){var o=a.data(this,"fullCalendar");if(o&&a.isFunction(o[e])){o=o[e].apply(o,j);if(h===b)h=o;e=="destroy"&&a.removeData(this,"fullCalendar")}});if(h!==b)return h;return this}var p=e.eventSources||[];delete e.eventSources;if(e.events){p.push(e.events);delete e.events}e=a.extend(true,{},Xa,e.isRTL||e.isRTL===b&&Xa.isRTL?Tb:{},e);this.each(function(o,E){var z=a(E),x=new c(z,e,p);z.data("fullCalendar",x);x.render()});return this};
Ka.sourceNormalizers=[];Ka.sourceFetchers=[];var Ib={dataType:"json",cache:false},Jb=1;Ka.addDays=k;Ka.cloneDate=m;Ka.parseDate=ca;Ka.parseISO8601=Ca;Ka.parseTime=Ea;Ka.formatDate=Da;Ka.formatDates=Pa;var Mb=["sun","mon","tue","wed","thu","fri","sat"],xb=864E5,Kb=36E5,Sb=6E4,Lb={s:function(e){return e.getSeconds()},ss:function(e){return Za(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return Za(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return Za(e.getHours()%
12||12)},H:function(e){return e.getHours()},HH:function(e){return Za(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return Za(e.getDate())},ddd:function(e,j){return j.dayNamesShort[e.getDay()]},e:function(e,j){return j.dayNamesShortest[e.getDay()]},dddd:function(e,j){return j.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return Za(e.getMonth()+1)},MMM:function(e,j){return j.monthNamesShort[e.getMonth()]},MMMM:function(e,j){return j.monthNames[e.getMonth()]},
yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return Da(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){e=e.getDate();if(e>10&&e<20)return"th";return["st","nd","rd"][e%10-1]||"th"}};Ka.applyAll=eb;Qa.year=function(e,j){var h=this;h.render=function(z,
x){if(x)h.curYear=i(z,x);var w=m(z,true);w.setFullYear(w.getFullYear(),0,1);var G=m(z);G.setFullYear(G.getFullYear(),11,31);var v=m(w),F=m(G),ga=p("weekends")?0:1;h.title=E(w,p("titleFormat"));h.start=w;h.end=G;h.visStart=v;h.visEnd=F;o("4x3",6,ga?5:7,true)};Nb.call(h,e,j,"year");var p=h.opt,o=h.renderYear,E=j.formatDate};Qa.month=function(e,j){var h=this;h.render=function(z,x){if(x){n(z,x);z.setDate(1)}var w=m(z,true);w.setDate(1);var G=n(m(w),1),v=m(w),F=m(G),ga=p("firstDay"),na=p("weekends")?0:
1;if(na){L(v);L(F,-1,true)}k(v,-((v.getDay()-Math.max(ga,na)+7)%7));k(F,(7-F.getDay()+Math.max(ga,na))%7);ga=Math.round((F-v)/(xb*7));if(p("weekMode")=="fixed"){k(F,(6-ga)*7);ga=6}h.title=E(w,p("titleFormat"));h.start=w;h.end=G;h.visStart=v;h.visEnd=F;o(6,ga,na?5:7,true)};vb.call(h,e,j,"month");var p=h.opt,o=h.renderBasic,E=j.formatDate};Qa.basicWeek=function(e,j){var h=this;h.render=function(z,x){x&&k(z,x*7);var w=k(m(z),-((z.getDay()-p("firstDay")+7)%7)),G=k(m(w),7),v=m(w),F=m(G),ga=p("weekends");
if(!ga){L(v);L(F,-1,true)}h.title=E(v,k(m(F),-1),p("titleFormat"));h.start=w;h.end=G;h.visStart=v;h.visEnd=F;o(1,1,ga?7:5,false)};vb.call(h,e,j,"basicWeek");var p=h.opt,o=h.renderBasic,E=j.formatDates};Qa.basicDay=function(e,j){var h=this;h.render=function(z,x){if(x){k(z,x);p("weekends")||L(z,x<0?-1:1)}h.title=E(z,p("titleFormat"));h.start=h.visStart=m(z,true);h.end=h.visEnd=k(m(h.start),1);o(1,1,1,false)};vb.call(h,e,j,"basicDay");var p=h.opt,o=h.renderBasic,E=j.formatDate};d({weekMode:"fixed"});
Qa.agendaWeek=function(e,j){var h=this;h.render=function(z,x){x&&k(z,x*7);var w=k(m(z),-((z.getDay()-p("firstDay")+7)%7)),G=k(m(w),7),v=m(w),F=m(G),ga=p("weekends");if(!ga){L(v);L(F,-1,true)}h.title=E(v,k(m(F),-1),p("titleFormat"));h.start=w;h.end=G;h.visStart=v;h.visEnd=F;o(ga?7:5)};Cb.call(h,e,j,"agendaWeek");var p=h.opt,o=h.renderAgenda,E=j.formatDates};Qa.agendaDay=function(e,j){var h=this;h.render=function(z,x){if(x){k(z,x);p("weekends")||L(z,x<0?-1:1)}var w=m(z,true),G=k(m(w),1);h.title=E(z,
p("titleFormat"));h.start=h.visStart=w;h.end=h.visEnd=G;o(1)};Cb.call(h,e,j,"agendaDay");var p=h.opt,o=h.renderAgenda,E=j.formatDate};d({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);
(function(a){function b(g,i,n){var k=i;if(i<10)k="0"+i;if(n.isoTime){i=g;if(i<10)i="0"+g;return i+":"+k}else{i=g%12;if(i==0)i=12;g=n.meridiemUpperCase?g<12?"AM":"PM":g<12?"am":"pm";return i+":"+k+g}}function d(g){if((g=g=/(\d+)\s*[:\-\.,]\s*(\d+)\s*(am|pm)?/i.exec(g))&&g.length>=3){var i=Number(g[1]),n=Number(g[2]);if(i==12&&g[3])i-=12;if(g[3]&&g[3].toLowerCase()=="pm")i+=12;return{hour:i,minute:n}}else return null}function c(g){return g&&g.hour*60+g.minute}function f(g,i){var n=c(i.minTime),k=c(i.maxTime),
P=c(i.defaultTime),s=i.selection&&c(d(i.selection)),I=i.minutes,m=i.onehour,K=i.hours;s=s&&Math.floor((s-n)/i.timeInterval)*i.timeInterval+n;for(var L,Y=a("<ul></ul>"),ba=n;ba<=k;ba+=i.timeInterval)(function(ca){var Ca=b(Math.floor(ca/60),ca%60,i),Ea=Ca;if(i.showDuration){var Da=ca-n;Ea+=Da<60?" ("+Da+" "+I+")":Da==60?" ("+m+")":" ("+Math.round(Da/60*10)/10+" "+K+")"}Ea=a("<li></li>").append(a('<a href="javascript:void(0);">'+Ea+"</a>").click(function(){i&&i.selectTime&&i.selectTime(Ca);return false}).mousemove(function(){a("li.selected",
Y).removeClass("selected")}).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})).appendTo(Y);if(!L&&ca==P)L=Ea;if(s==ca){Ea.addClass("selected").addClass("ui-state-highlight");L=Ea}})(ba);L&&setTimeout(function(){g[0].scrollTop=L[0].offsetTop-L.height()*2},0);g.empty().append(Y)}a.fn.calendricalTime=function(g){g=g||{};g.timeInterval=g.timeInterval||30;g.padding=g.padding||4;return this.each(function(){var i=a(this),n,k=false;i.bind("focus click",
function(){if(!n){var P=i.position();n=a("<div></div>").addClass("calendricalTimePopup ui-widget ui-widget-content").mouseenter(function(){k=true}).mouseleave(function(){k=false}).mousedown(function(I){I.preventDefault()}).css({position:"absolute",left:P.left,top:P.top+i.height()+g.padding*2});i.after(n);P={selection:i.val(),selectTime:function(I){k=false;i.val(I);n.remove();n=null},isoTime:g.isoTime||false,meridiemUpperCase:g.meridiemUpperCase||false,defaultTime:g.defaultTime||{hour:8,minute:0},
minTime:g.minTime||{hour:0,minute:0},maxTime:g.maxTime||{hour:23,minute:59},timeInterval:g.timeInterval||30,minutes:g.minutes||"mins",onehour:g.onehour||"1 hr",hours:g.hours||"hrs"};if(g.startTime){var s=d(g.startTime.val());if(g.startDate&&g.endDate&&!areDatesEqual(parseDate(g.startDate.val()),parseDate(g.endDate.val())))s=null;if(s){P.minTime=s;P.showDuration=true;n.addClass("calendricalEndTimePopup")}}f(n,P)}}).blur(function(){if(k)n&&i.focus();else if(n){n.remove();n=null}})})};a.fn.calendricalTimeRange=
function(g){if(this.length>=2){a(this[0]).calendricalTime(g);a(this[1]).calendricalTime(a.extend({startTime:a(this[0])},g))}return this}})(jQuery);
(function(a){function b(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",ampm:false,timeFormat:"hh:mm tt",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",timezoneText:"Time Zone"};this._defaults={showButtonPanel:true,timeOnly:false,showHour:true,showMinute:true,showSecond:false,showTimezone:false,showTime:true,stepHour:0.05,stepMinute:0.05,stepSecond:0.05,hour:0,minute:0,second:0,timezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,
hourMax:23,minuteMax:59,secondMax:59,minDateTime:null,maxDateTime:null,hourGrid:0,minuteGrid:0,secondGrid:0,alwaysSetTime:true,separator:" ",altFieldTimeOnly:true,showTimepicker:true,timezoneList:["-1100","-1000","-0900","-0800","-0700","-0600","-0500","-0400","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0400","+0500","+0600","+0700","+0800","+0900","+1000","+1100","+1200"]};a.extend(this._defaults,this.regional[""])}a.extend(a.ui,{timepicker:{version:"0.9.4"}});a.extend(b.prototype,
{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,timezone_select:null,hour:0,minute:0,second:0,timezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:["-1100","-1000","-0900","-0800","-0700","-0600","-0500","-0400","-0300","-0200","-0100","+0000","+0100","+0200","+0300",
"+0400","+0500","+0600","+0700","+0800","+0900","+1000","+1100","+1200"],setDefaults:function(d){var c=this._defaults;d=d||{};a.extend(c,d);for(var f in d)if(d[f]===null||d[f]===undefined)c[f]=d[f];return this},_newInst:function(d,c){var f=new b,g={},i;for(i in this._defaults){var n=d.attr("time:"+i);if(n)try{g[i]=eval(n)}catch(k){g[i]=n}}f._defaults=a.extend({},this._defaults,g,c,{beforeShow:function(P,s){a.isFunction(c.beforeShow)&&c.beforeShow(P,s,f)},onChangeMonthYear:function(P,s,I){f._updateDateTime(I);
a.isFunction(c.onChangeMonthYear)&&c.onChangeMonthYear.call(d[0],P,s,I,f)},onClose:function(P,s){f.timeDefined===true&&d.val()!=""&&f._updateDateTime(s);a.isFunction(c.onClose)&&c.onClose.call(d[0],P,s,f)},timepicker:f});f.hour=f._defaults.hour;f.minute=f._defaults.minute;f.second=f._defaults.second;f.ampm="";f.$input=d;if(c.altField)f.$altInput=a(c.altField).css({cursor:"pointer"}).focus(function(){d.trigger("focus")});if(f._defaults.minDate!==undefined&&f._defaults.minDate instanceof Date)f._defaults.minDateTime=
new Date(f._defaults.minDate.getTime());if(f._defaults.minDateTime!==undefined&&f._defaults.minDateTime instanceof Date)f._defaults.minDate=new Date(f._defaults.minDateTime.getTime());if(f._defaults.maxDate!==undefined&&f._defaults.maxDate instanceof Date)f._defaults.maxDateTime=new Date(f._defaults.maxDate.getTime());if(f._defaults.maxDateTime!==undefined&&f._defaults.maxDateTime instanceof Date)f._defaults.maxDate=new Date(f._defaults.maxDateTime.getTime());return f},_addTimePicker:function(d){this.timeDefined=
this._parseTime(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this._limitMinMaxDateTime(d,false);this._injectTimePicker()},_parseTime:function(d,c){var f=this._defaults.timeFormat.toString().replace(/h{1,2}/ig,"(\\d?\\d)").replace(/m{1,2}/ig,"(\\d?\\d)").replace(/s{1,2}/ig,"(\\d?\\d)").replace(/t{1,2}/ig,"(am|pm|a|p)?").replace(/z{1}/ig,"((\\+|-)\\d\\d\\d\\d)?").replace(/\s/g,"\\s?")+"$",g=this._getFormatPositions();if(!this.inst)this.inst=
a.datepicker._getInst(this.$input[0]);if(c||!this._defaults.timeOnly)f=".{"+a.datepicker._get(this.inst,"dateFormat").length+",}"+this._defaults.separator.replace(RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&")+f;if(f=d.match(RegExp(f,"i"))){if(g.t!==-1)this.ampm=(f[g.t]===undefined||f[g.t].length===0?"":f[g.t].charAt(0).toUpperCase()=="A"?"AM":"PM").toUpperCase();if(g.h!==-1)this.hour=this.ampm=="AM"&&f[g.h]=="12"?0:this.ampm=="PM"&&f[g.h]!="12"?(parseFloat(f[g.h])+12).toFixed(0):Number(f[g.h]);if(g.m!==
-1)this.minute=Number(f[g.m]);if(g.s!==-1)this.second=Number(f[g.s]);if(g.z!==-1)this.timezone=f[g.z];return true}return false},_getFormatPositions:function(){var d=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|t{1,2}|z)/g),c={h:-1,m:-1,s:-1,t:-1,z:-1};if(d)for(var f=0;f<d.length;f++)if(c[d[f].toString().charAt(0)]==-1)c[d[f].toString().charAt(0)]=f+1;return c},_injectTimePicker:function(){var d=this.inst.dpDiv,c=this._defaults,f=this,g=(c.hourMax-c.hourMax%c.stepHour).toFixed(0),
i=(c.minuteMax-c.minuteMax%c.stepMinute).toFixed(0),n=(c.secondMax-c.secondMax%c.stepSecond).toFixed(0),k=this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,"");if(d.find("div#ui-timepicker-div-"+k).length===0&&c.showTimepicker){var P='<div class="ui-timepicker-div" id="ui-timepicker-div-'+k+'"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+k+'"'+(c.showTime?"":' style="display:none;"')+">"+c.timeText+'</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_'+k+'"'+(c.showTime?"":
' style="display:none;"')+'></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+k+'"'+(c.showHour?"":' style="display:none;"')+">"+c.hourText+"</dt>",s=0,I=0,m=0,K;if(c.showHour&&c.hourGrid>0){P+='<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_'+k+'"'+(c.showHour?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(var L=c.hourMin;L<g;L+=c.hourGrid){s++;var Y=c.ampm&&L>12?L-12:L;if(Y<10)Y="0"+Y;if(c.ampm)if(L==0)Y="12a";else Y+=L<12?"a":"p";P+=
"<td>"+Y+"</td>"}P+="</tr></table></div></dd>"}else P+='<dd class="ui_tpicker_hour" id="ui_tpicker_hour_'+k+'"'+(c.showHour?"":' style="display:none;"')+"></dd>";P+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+k+'"'+(c.showMinute?"":' style="display:none;"')+">"+c.minuteText+"</dt>";if(c.showMinute&&c.minuteGrid>0){P+='<dd class="ui_tpicker_minute ui_tpicker_minute_'+c.minuteGrid+'"><div id="ui_tpicker_minute_'+k+'"'+(c.showMinute?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';
for(L=c.minuteMin;L<i;L+=c.minuteGrid){I++;P+="<td>"+(L<10?"0":"")+L+"</td>"}P+="</tr></table></div></dd>"}else P+='<dd class="ui_tpicker_minute" id="ui_tpicker_minute_'+k+'"'+(c.showMinute?"":' style="display:none;"')+"></dd>";P+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+k+'"'+(c.showSecond?"":' style="display:none;"')+">"+c.secondText+"</dt>";if(c.showSecond&&c.secondGrid>0){P+='<dd class="ui_tpicker_second ui_tpicker_second_'+c.secondGrid+'"><div id="ui_tpicker_second_'+
k+'"'+(c.showSecond?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(L=c.secondMin;L<n;L+=c.secondGrid){m++;P+="<td>"+(L<10?"0":"")+L+"</td>"}P+="</tr></table></div></dd>"}else P+='<dd class="ui_tpicker_second" id="ui_tpicker_second_'+k+'"'+(c.showSecond?"":' style="display:none;"')+"></dd>";P+='<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+k+'"'+(c.showTimezone?"":' style="display:none;"')+">"+c.timezoneText+"</dt>";P+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+
k+'"'+(c.showTimezone?"":' style="display:none;"')+"></dd>";P+="</dl></div>";$tp=a(P);if(c.timeOnly===true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+c.timeOnlyTitle+"</div></div>");d.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()}this.hour_slider=$tp.find("#ui_tpicker_hour_"+k).slider({orientation:"horizontal",value:this.hour,min:c.hourMin,max:g,step:c.stepHour,slide:function(ba,ca){f.hour_slider.slider("option",
"value",ca.value);f._onTimeChange()}});this.minute_slider=$tp.find("#ui_tpicker_minute_"+k).slider({orientation:"horizontal",value:this.minute,min:c.minuteMin,max:i,step:c.stepMinute,slide:function(ba,ca){f.minute_slider.slider("option","value",ca.value);f._onTimeChange()}});this.second_slider=$tp.find("#ui_tpicker_second_"+k).slider({orientation:"horizontal",value:this.second,min:c.secondMin,max:n,step:c.stepSecond,slide:function(ba,ca){f.second_slider.slider("option","value",ca.value);f._onTimeChange()}});
this.timezone_select=$tp.find("#ui_tpicker_timezone_"+k).append("<select></select>").find("select");a.fn.append.apply(this.timezone_select,a.map(c.timezoneList,function(ba){return a("<option />").val(typeof ba=="object"?ba.value:ba).text(typeof ba=="object"?ba.label:ba)}));this.timezone_select.val(typeof this.timezone!="undefined"&&this.timezone!=null&&this.timezone!=""?this.timezone:c.timezone);this.timezone_select.change(function(){f._onTimeChange()});if(c.showHour&&c.hourGrid>0){K=100*s*c.hourGrid/
(g-c.hourMin);$tp.find(".ui_tpicker_hour table").css({width:K+"%",marginLeft:K/(-2*s)+"%",borderCollapse:"collapse"}).find("td").each(function(){a(this).click(function(){var ba=a(this).html();if(c.ampm){var ca=ba.substring(2).toLowerCase();ba=parseInt(ba.substring(0,2));ba=ca=="a"?ba==12?0:ba:ba==12?12:ba+12}f.hour_slider.slider("option","value",ba);f._onTimeChange();f._onSelectHandler()}).css({cursor:"pointer",width:100/s+"%",textAlign:"center",overflow:"hidden"})})}if(c.showMinute&&c.minuteGrid>
0){K=100*I*c.minuteGrid/(i-c.minuteMin);$tp.find(".ui_tpicker_minute table").css({width:K+"%",marginLeft:K/(-2*I)+"%",borderCollapse:"collapse"}).find("td").each(function(){a(this).click(function(){f.minute_slider.slider("option","value",a(this).html());f._onTimeChange();f._onSelectHandler()}).css({cursor:"pointer",width:100/I+"%",textAlign:"center",overflow:"hidden"})})}c.showSecond&&c.secondGrid>0&&$tp.find(".ui_tpicker_second table").css({width:K+"%",marginLeft:K/(-2*m)+"%",borderCollapse:"collapse"}).find("td").each(function(){a(this).click(function(){f.second_slider.slider("option",
"value",a(this).html());f._onTimeChange();f._onSelectHandler()}).css({cursor:"pointer",width:100/m+"%",textAlign:"center",overflow:"hidden"})});g=d.find(".ui-datepicker-buttonpane");g.length?g.before($tp):d.append($tp);this.$timeObj=$tp.find("#ui_tpicker_time_"+k);if(this.inst!==null){d=this.timeDefined;this._onTimeChange();this.timeDefined=d}d=function(){f._onSelectHandler()};this.hour_slider.bind("slidestop",d);this.minute_slider.bind("slidestop",d);this.second_slider.bind("slidestop",d)}},_limitMinMaxDateTime:function(d,
c){var f=this._defaults,g=new Date(d.selectedYear,d.selectedMonth,d.selectedDay);if(this._defaults.showTimepicker){if(this._defaults.minDateTime!==null&&g){var i=this._defaults.minDateTime,n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null){this.hourMinOriginal=f.hourMin;this.minuteMinOriginal=f.minuteMin;this.secondMinOriginal=f.secondMin}if(d.settings.timeOnly||n.getTime()==g.getTime()){this._defaults.hourMin=
i.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=i.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=i.getSeconds()}else{if(this.second<this._defaults.secondMin)this.second=this._defaults.secondMin;this._defaults.secondMin=this.secondMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal}}else{this._defaults.hourMin=
this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal}}if(this._defaults.maxDateTime!==null&&g){i=this._defaults.maxDateTime;n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null){this.hourMaxOriginal=f.hourMax;this.minuteMaxOriginal=f.minuteMax;this.secondMaxOriginal=f.secondMax}if(d.settings.timeOnly||n.getTime()==g.getTime()){this._defaults.hourMax=
i.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=i.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMin=i.getSeconds()}else{if(this.second>this._defaults.secondMax)this.second=this._defaults.secondMax;this._defaults.secondMax=this.secondMaxOriginal}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal}}else{this._defaults.hourMax=
this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal}}if(c!==undefined&&c===true){this.hour_slider.slider("option",{min:this._defaults.hourMin,max:this._defaults.hourMax}).slider("value",this.hour);this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:this._defaults.minuteMax}).slider("value",this.minute);this.second_slider.slider("option",{min:this._defaults.secondMin,max:this._defaults.secondMax}).slider("value",this.second)}}},
_onTimeChange:function(){var d=this.hour_slider?this.hour_slider.slider("value"):false,c=this.minute_slider?this.minute_slider.slider("value"):false,f=this.second_slider?this.second_slider.slider("value"):false,g=this.timezone_select?this.timezone_select.val():false;if(d!==false)d=parseInt(d,10);if(c!==false)c=parseInt(c,10);if(f!==false)f=parseInt(f,10);var i=d<12?"AM":"PM",n=d!=this.hour||c!=this.minute||f!=this.second||this.ampm.length>0&&this.ampm!=i||g!=this.timezone;if(n){if(d!==false)this.hour=
d;if(c!==false)this.minute=c;if(f!==false)this.second=f;if(g!==false)this.timezone=g;this._limitMinMaxDateTime(this.inst,true)}if(this._defaults.ampm)this.ampm=i;this._formatTime();this.$timeObj&&this.$timeObj.text(this.formattedTime);this.timeDefined=true;n&&this._updateDateTime()},_onSelectHandler:function(){var d=this._defaults.onSelect,c=this.$input?this.$input[0]:null;d&&c&&d.apply(c,[this.formattedDateTime,this])},_formatTime:function(d,c,f){if(f==undefined)f=this._defaults.ampm;d=d||{hour:this.hour,
minute:this.minute,second:this.second,ampm:this.ampm,timezone:this.timezone};var g=c||this._defaults.timeFormat.toString();if(f){var i=d.ampm=="AM"?d.hour:d.hour%12;i=Number(i)===0?12:i;g=g.toString().replace(/hh/g,(i<10?"0":"")+i).replace(/h/g,i).replace(/mm/g,(d.minute<10?"0":"")+d.minute).replace(/m/g,d.minute).replace(/ss/g,(d.second<10?"0":"")+d.second).replace(/s/g,d.second).replace(/TT/g,d.ampm.toUpperCase()).replace(/tt/g,d.ampm.toLowerCase()).replace(/T/g,d.ampm.charAt(0).toUpperCase()).replace(/t/g,
d.ampm.charAt(0).toLowerCase()).replace(/z/g,d.timezone)}else{g=g.toString().replace(/hh/g,(d.hour<10?"0":"")+d.hour).replace(/h/g,d.hour).replace(/mm/g,(d.minute<10?"0":"")+d.minute).replace(/m/g,d.minute).replace(/ss/g,(d.second<10?"0":"")+d.second).replace(/s/g,d.second).replace(/z/g,d.timezone);g=a.trim(g.replace(/t/gi,""))}if(arguments.length)return g;else this.formattedTime=g},_updateDateTime:function(d){d=this.inst||d;dt=new Date(d.selectedYear,d.selectedMonth,d.selectedDay);dateFmt=a.datepicker._get(d,
"dateFormat");formatCfg=a.datepicker._getFormatConfig(d);timeAvailable=dt!==null&&this.timeDefined;var c=this.formattedDate=a.datepicker.formatDate(dateFmt,dt===null?new Date:dt,formatCfg);if(!(d.lastVal!==undefined&&d.lastVal.length>0&&this.$input.val().length===0)){if(this._defaults.timeOnly===true)c=this.formattedTime;else if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable))c+=this._defaults.separator+this.formattedTime;this.formattedDateTime=c;if(this._defaults.showTimepicker)if(this.$altInput&&
this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else{this.$altInput&&this.$altInput.val(c);this.$input.val(c)}else this.$input.val(this.formattedDate);this.$input.trigger("change")}}});a.fn.extend({timepicker:function(d){d=d||{};var c=arguments;if(typeof d=="object")c[0]=a.extend(d,{timeOnly:true});return a(this).each(function(){a.fn.datetimepicker.apply(a(this),c)})},datetimepicker:function(d){d=d||{};var c=arguments;return typeof d==
"string"?d=="getDate"?a.fn.datepicker.apply(a(this[0]),c):this.each(function(){var f=a(this);f.datepicker.apply(f,c)}):this.each(function(){var f=a(this);f.datepicker(a.timepicker._newInst(f,d)._defaults)})}});a.datepicker._base_selectDate=a.datepicker._selectDate;a.datepicker._selectDate=function(d,c){var f=this._getInst(a(d)[0]),g=this._get(f,"timepicker");if(g){g._limitMinMaxDateTime(f,true);f.inline=f.stay_open=true;this._base_selectDate(d,c+g._defaults.separator+g.formattedTime);f.inline=f.stay_open=
false;this._notifyChange(f);this._updateDatepicker(f)}else this._base_selectDate(d,c)};a.datepicker._base_updateDatepicker=a.datepicker._updateDatepicker;a.datepicker._updateDatepicker=function(d){if(typeof d.stay_open!=="boolean"||d.stay_open===false){this._base_updateDatepicker(d);var c=this._get(d,"timepicker");c&&c._addTimePicker(d)}};a.datepicker._base_doKeyPress=a.datepicker._doKeyPress;a.datepicker._doKeyPress=function(d){var c=a.datepicker._getInst(d.target),f=a.datepicker._get(c,"timepicker");
if(f)if(a.datepicker._get(c,"constrainInput")){var g=f._defaults.ampm;c=f._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,g?"APM":"").replace(/T/g,g?"AP":"").replace(/tt/g,g?"apm":"").replace(/t/g,g?"ap":"")+" "+f._defaults.separator+a.datepicker._possibleChars(a.datepicker._get(c,"dateFormat"));f=String.fromCharCode(d.charCode===undefined?d.keyCode:d.charCode);return d.ctrlKey||f<" "||!c||c.indexOf(f)>-1}return a.datepicker._base_doKeyPress(d)};a.datepicker._base_doKeyUp=a.datepicker._doKeyUp;
a.datepicker._doKeyUp=function(d){var c=a.datepicker._getInst(d.target),f=a.datepicker._get(c,"timepicker");if(f)if(f._defaults.timeOnly&&c.input.val()!=c.lastVal)try{a.datepicker._updateDatepicker(c)}catch(g){a.datepicker.log(g)}return a.datepicker._base_doKeyUp(d)};a.datepicker._base_gotoToday=a.datepicker._gotoToday;a.datepicker._gotoToday=function(d){this._base_gotoToday(d);this._setTime(this._getInst(a(d)[0]),new Date)};a.datepicker._disableTimepickerDatepicker=function(d){var c=this._getInst(d),
f=this._get(c,"timepicker");a(d).datepicker("getDate");if(f){f._defaults.showTimepicker=false;f._updateDateTime(c)}};a.datepicker._enableTimepickerDatepicker=function(d){var c=this._getInst(d),f=this._get(c,"timepicker");a(d).datepicker("getDate");if(f){f._defaults.showTimepicker=true;f._addTimePicker(c);f._updateDateTime(c)}};a.datepicker._setTime=function(d,c){var f=this._get(d,"timepicker");if(f){var g=f._defaults,i=c?c.getHours():g.hour,n=c?c.getMinutes():g.minute,k=c?c.getSeconds():g.second;
if(i<g.hourMin||i>g.hourMax||n<g.minuteMin||n>g.minuteMax||k<g.secondMin||k>g.secondMax){i=g.hourMin;n=g.minuteMin;k=g.secondMin}if(f.hour_slider)f.hour_slider.slider("value",i);else f.hour=i;if(f.minute_slider)f.minute_slider.slider("value",n);else f.minute=n;if(f.second_slider)f.second_slider.slider("value",k);else f.second=k;f._onTimeChange();f._updateDateTime(d)}};a.datepicker._setTimeDatepicker=function(d,c,f){d=this._getInst(d);var g=this._get(d,"timepicker");if(g){this._setDateFromField(d);
if(c){if(typeof c=="string"){g._parseTime(c,f);c=new Date;c.setHours(g.hour,g.minute,g.second)}else c=new Date(c.getTime());if(c.toString()=="Invalid Date")c=undefined;this._setTime(d,c)}}};a.datepicker._base_setDateDatepicker=a.datepicker._setDateDatepicker;a.datepicker._setDateDatepicker=function(d,c){var f=this._getInst(d),g=c instanceof Date?new Date(c.getTime()):c;this._updateDatepicker(f);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(d,g,true)};a.datepicker._base_getDateDatepicker=
a.datepicker._getDateDatepicker;a.datepicker._getDateDatepicker=function(d,c){var f=this._getInst(d),g=this._get(f,"timepicker");if(g){this._setDateFromField(f,c);(f=this._getDate(f))&&g._parseTime(a(d).val(),true)&&f.setHours(g.hour,g.minute,g.second);return f}return this._base_getDateDatepicker(d,c)};a.timepicker=new b;a.timepicker.version="0.9.4"})(jQuery);
(function(a){a(document.body).is("[role]")||a(document.body).attr("role","application");var b=0;a.widget("ui.tooltip",{options:{tooltipClass:"ui-widget-content",content:function(){return a(this).attr("title")},position:{my:"left center",at:"right center",offset:"15 0"}},_init:function(){var d=this;this.tooltip=a("<div></div>").attr("id","ui-tooltip-"+b++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide();
this.tooltipContent=a("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.bind("focus.tooltip mouseenter.tooltip",function(c){d.open(c)}).bind("blur.tooltip mouseleave.tooltip",function(c){d.close(c)})},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},destroy:function(){this.tooltip.remove();a.Widget.prototype.destroy.apply(this,arguments)},widget:function(){return this.tooltip},open:function(d){var c=
this.element;if(!(this.current&&this.current[0]==c[0])){var f=this;this.current=c;this.currentTitle=c.attr("title");var g=this.options.content.call(c[0],function(i){f.current==c&&f._show(d,c,i)});g&&f._show(d,c,g)}},_show:function(d,c,f){if(f){c.attr("title","");if(!this.options.disabled){this.tooltipContent.html(f);this.tooltip.css({top:0,left:0}).show().position(a.extend(this.options.position,{of:c})).hide();this.tooltip.attr("aria-hidden","false");c.attr("aria-describedby",this.tooltip.attr("id"));
if(this.tooltip.is(":animated"))this.tooltip.stop().show().fadeTo("normal",this.opacity);else this.tooltip.is(":visible")?this.tooltip.fadeTo("normal",this.opacity):this.tooltip.fadeIn();this._trigger("open",d)}}},close:function(d){if(this.current){var c=this.current.attr("title",this.currentTitle);this.current=null;if(!this.options.disabled){c.removeAttr("aria-describedby");this.tooltip.attr("aria-hidden","true");this.tooltip.is(":animated")?this.tooltip.stop().fadeTo("normal",0,function(){a(this).hide().css("opacity",
"")}):this.tooltip.stop().fadeOut();this._trigger("close",d)}}}})})(jQuery);
(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{guid:1,uidPref:"jqg",randId:function(b){return(b?b:a.jgrid.uidPref)+a.jgrid.guid++}});a.extend(a.jgrid,{showModal:function(b){b.w.show()},closeModal:function(b){b.w.hide().attr("aria-hidden","true");b.o&&b.o.remove()},hideModal:function(b,d){d=a.extend({jqm:true,gb:""},d||{});if(d.onClose){var c=d.onClose(b);if(typeof c=="boolean"&&!c)return}if(a.fn.jqm&&d.jqm===true)a(b).attr("aria-hidden","true").jqmHide();else{if(d.gb!=="")try{a(".jqgrid-overlay:first",
d.gb).hide()}catch(f){}a(b).hide().attr("aria-hidden","true")}},findPos:function(b){var d=0,c=0;if(b.offsetParent){do{d+=b.offsetLeft;c+=b.offsetTop}while(b=b.offsetParent)}return[d,c]},createModal:function(b,d,c,f,g,i,n){var k=document.createElement("div"),P,s=this;n=a.extend({},n||{});P=a(c.gbox).attr("dir")=="rtl"?true:false;k.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";k.id=b.themodal;var I=document.createElement("div");I.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";
I.id=b.modalhead;a(I).append("<span class='ui-jqdialog-title'>"+c.caption+"</span>");var m=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){m.addClass("ui-state-hover")},function(){m.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(I).append(m);if(P){k.dir="rtl";a(".ui-jqdialog-title",I).css("float","right");a(".ui-jqdialog-titlebar-close",I).css("left","0.3em")}else{k.dir="ltr";a(".ui-jqdialog-title",
I).css("float","left");a(".ui-jqdialog-titlebar-close",I).css("right","0.3em")}var K=document.createElement("div");a(K).addClass("ui-jqdialog-content ui-widget-content").attr("id",b.modalcontent);a(K).append(d);k.appendChild(K);a(k).prepend(I);if(i===true)a("body").append(k);else typeof i=="string"?a(i).append(k):a(k).insertBefore(f);a(k).css(n);if(typeof c.jqModal==="undefined")c.jqModal=true;d={};if(a.fn.jqm&&c.jqModal===true){if(c.left===0&&c.top===0&&c.overlay){n=[];n=this.findPos(g);c.left=n[0]+
4;c.top=n[1]+4}d.top=c.top+"px";d.left=c.left}else if(c.left!==0||c.top!==0){d.left=c.left;d.top=c.top+"px"}a("a.ui-jqdialog-titlebar-close",I).click(function(){var ba=a("#"+b.themodal).data("onClose")||c.onClose,ca=a("#"+b.themodal).data("gbox")||c.gbox;s.hideModal("#"+b.themodal,{gb:ca,jqm:c.jqModal,onClose:ba});return false});if(c.width===0||!c.width)c.width=300;if(c.height===0||!c.height)c.height=200;if(!c.zIndex){f=a(f).parents("*[role=dialog]").filter(":first").css("z-index");c.zIndex=f?parseInt(f,
10)+1:950}f=0;if(P&&d.left&&!i){f=a(c.gbox).width()-(!isNaN(c.width)?parseInt(c.width,10):0)-8;d.left=parseInt(d.left,10)+parseInt(f,10)}if(d.left)d.left+="px";a(k).css(a.extend({width:isNaN(c.width)?"auto":c.width+"px",height:isNaN(c.height)?"auto":c.height+"px",zIndex:c.zIndex,overflow:"hidden"},d)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":b.modalhead,"aria-hidden":"true"});if(typeof c.drag=="undefined")c.drag=true;if(typeof c.resize=="undefined")c.resize=true;if(c.drag){a(I).css("cursor",
"move");if(a.fn.jqDrag)a(k).jqDrag(I);else try{a(k).draggable({handle:a("#"+I.id)})}catch(L){}}if(c.resize)if(a.fn.jqResize){a(k).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>");a("#"+b.themodal).jqResize(".jqResize",b.scrollelm?"#"+b.scrollelm:false)}else try{a(k).resizable({handles:"se, sw",alsoResize:b.scrollelm?"#"+b.scrollelm:false})}catch(Y){}c.closeOnEscape===true&&a(k).keydown(function(ba){if(ba.which==
27){ba=a("#"+b.themodal).data("onClose")||c.onClose;s.hideModal(this,{gb:c.gbox,jqm:c.jqModal,onClose:ba})}})},viewModal:function(b,d){d=a.extend({toTop:true,overlay:10,modal:false,onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:true,jqM:true},d||{});if(a.fn.jqm&&d.jqm===true)d.jqM?a(b).attr("aria-hidden","false").jqm(d).jqmShow():a(b).attr("aria-hidden","false").jqmShow();else{if(d.gbox!==""){a(".jqgrid-overlay:first",d.gbox).show();a(b).data("gbox",d.gbox)}a(b).show().attr("aria-hidden",
"false");try{a(":input:visible",b)[0].focus()}catch(c){}}},info_dialog:function(b,d,c,f){var g={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+b+"</b>",left:250,top:170,zIndex:1E3,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};a.extend(g,f||{});var i=g.jqModal,n=this;if(a.fn.jqm&&!i)i=false;b="";if(g.buttons.length>0)for(f=0;f<g.buttons.length;f++){if(typeof g.buttons[f].id=="undefined")g.buttons[f].id="info_button_"+f;b+=
"<a href='javascript:void(0)' id='"+g.buttons[f].id+"' class='fm-button ui-state-default ui-corner-all'>"+g.buttons[f].text+"</a>"}f=isNaN(g.dataheight)?g.dataheight:g.dataheight+"px";var k="<div id='info_id'>";k+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+f+";"+("text-align:"+g.align+";")+"'>"+d+"</div>";k+=c?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+
c+"</a>"+b+"</div>":b!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+b+"</div>":"";k+="</div>";try{a("#info_dialog").attr("aria-hidden")=="false"&&this.hideModal("#info_dialog",{jqm:i});a("#info_dialog").remove()}catch(P){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},k,g,"","",true);b&&a.each(g.buttons,
function(I){a("#"+this.id,"#info_id").bind("click",function(){g.buttons[I].onClick.call(a("#info_dialog"));return false})});a("#closedialog","#info_id").click(function(){n.hideModal("#info_dialog",{jqm:i});return false});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.isFunction(g.beforeOpen)&&g.beforeOpen();this.viewModal("#info_dialog",{onHide:function(I){I.w.hide().remove();I.o&&I.o.remove()},modal:g.modal,
jqm:i});a.isFunction(g.afterOpen)&&g.afterOpen();try{a("#info_dialog").focus()}catch(s){}},createEl:function(b,d,c,f,g){function i(K,L){a.isFunction(L.dataInit)&&L.dataInit(K);L.dataEvents&&a.each(L.dataEvents,function(){this.data!==undefined?a(K).bind(this.type,this.data,this.fn):a(K).bind(this.type,this.fn)});return L}function n(K,L,Y){var ba=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr"];if(typeof Y!="undefined"&&a.isArray(Y))ba=a.extend(ba,Y);a.each(L,
function(ca,Ca){a.inArray(ca,ba)===-1&&a(K).attr(ca,Ca)});L.hasOwnProperty("id")||a(K).attr("id",a.jgrid.randId())}var k="";switch(b){case "textarea":k=document.createElement("textarea");if(f)d.cols||a(k).css({width:"98%"});else if(!d.cols)d.cols=20;if(!d.rows)d.rows=2;if(c=="&nbsp;"||c=="&#160;"||c.length==1&&c.charCodeAt(0)==160)c="";k.value=c;n(k,d);d=i(k,d);a(k).attr({role:"textbox",multiline:"true"});break;case "checkbox":k=document.createElement("input");k.type="checkbox";if(d.value){b=d.value.split(":");
if(c===b[0]){k.checked=true;k.defaultChecked=true}k.value=b[0];a(k).attr("offval",b[1])}else{b=c.toLowerCase();if(b.search(/(false|0|no|off|undefined)/i)<0&&b!==""){k.checked=true;k.defaultChecked=true;k.value=c}else k.value="on";a(k).attr("offval","off")}n(k,d,["value"]);d=i(k,d);a(k).attr("role","checkbox");break;case "select":k=document.createElement("select");k.setAttribute("role","select");f=[];if(d.multiple===true){b=true;k.multiple="multiple";a(k).attr("aria-multiselectable","true")}else b=
false;if(typeof d.dataUrl!="undefined")a.ajax(a.extend({url:d.dataUrl,type:"GET",dataType:"html",context:{elem:k,options:d,vl:c},success:function(K){var L=[],Y=this.elem,ba=this.vl,ca=a.extend({},this.options),Ca=ca.multiple===true;if(typeof ca.buildSelect!="undefined")K=ca.buildSelect(K);if(K=a(K).html()){a(Y).append(K);n(Y,ca);ca=i(Y,ca);if(typeof ca.size==="undefined")ca.size=Ca?3:1;if(Ca){L=ba.split(",");L=a.map(L,function(Ea){return a.trim(Ea)})}else L[0]=a.trim(ba);setTimeout(function(){a("option",
Y).each(function(){a(this).attr("role","option");if(a.inArray(a.trim(a(this).text()),L)>-1||a.inArray(a.trim(a(this).val()),L)>-1)this.selected="selected"})},0)}}},g||{}));else if(d.value){var P;if(b){f=c.split(",");f=a.map(f,function(K){return a.trim(K)});if(typeof d.size==="undefined")d.size=3}else d.size=1;if(typeof d.value==="function")d.value=d.value();var s,I;if(typeof d.value==="string"){s=d.value.split(";");for(P=0;P<s.length;P++){I=s[P].split(":");if(I.length>2)I[1]=a.map(I,function(K,L){if(L>
0)return K}).join(":");g=document.createElement("option");g.setAttribute("role","option");g.value=I[0];g.innerHTML=I[1];if(!b&&(a.trim(I[0])==a.trim(c)||a.trim(I[1])==a.trim(c)))g.selected="selected";if(b&&(a.inArray(a.trim(I[1]),f)>-1||a.inArray(a.trim(I[0]),f)>-1))g.selected="selected";k.appendChild(g)}}else if(typeof d.value==="object"){s=d.value;for(P in s)if(s.hasOwnProperty(P)){g=document.createElement("option");g.setAttribute("role","option");g.value=P;g.innerHTML=s[P];if(!b&&(a.trim(P)==a.trim(c)||
a.trim(s[P])==a.trim(c)))g.selected="selected";if(b&&(a.inArray(a.trim(s[P]),f)>-1||a.inArray(a.trim(P),f)>-1))g.selected="selected";k.appendChild(g)}}n(k,d,["value"]);d=i(k,d)}break;case "text":case "password":case "button":P=b=="button"?"button":"textbox";k=document.createElement("input");k.type=b;k.value=c;n(k,d);d=i(k,d);if(b!="button")if(f)d.size||a(k).css({width:"98%"});else if(!d.size)d.size=20;a(k).attr("role",P);break;case "image":case "file":k=document.createElement("input");k.type=b;n(k,
d);d=i(k,d);break;case "custom":k=document.createElement("span");try{if(a.isFunction(d.custom_element))if(s=d.custom_element.call(this,c,d)){s=a(s).addClass("customelement").attr({id:d.id,name:d.name});a(k).empty().append(s)}else throw"e2";else throw"e1";}catch(m){m=="e1"&&this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose);m=="e2"?this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):
this.info_dialog(a.jgrid.errors.errcap,typeof m==="string"?m:m.message,a.jgrid.edit.bClose)}}return k},checkDate:function(b,d){var c={},f;b=b.toLowerCase();f=b.indexOf("/")!=-1?"/":b.indexOf("-")!=-1?"-":b.indexOf(".")!=-1?".":"/";b=b.split(f);d=d.split(f);if(d.length!=3)return false;f=-1;for(var g,i=-1,n=-1,k=0;k<b.length;k++){g=isNaN(d[k])?0:parseInt(d[k],10);c[b[k]]=g;g=b[k];if(g.indexOf("y")!=-1)f=k;if(g.indexOf("m")!=-1)n=k;if(g.indexOf("d")!=-1)i=k}g=b[f]=="y"||b[f]=="yyyy"?4:b[f]=="yy"?2:-1;
k=function(s){for(var I=1;I<=s;I++){this[I]=31;if(I==4||I==6||I==9||I==11)this[I]=30;if(I==2)this[I]=29}return this}(12);var P;if(f===-1)return false;else{P=c[b[f]].toString();if(g==2&&P.length==1)g=1;if(P.length!=g||c[b[f]]===0&&d[f]!="00")return false}if(n===-1)return false;else{P=c[b[n]].toString();if(P.length<1||c[b[n]]<1||c[b[n]]>12)return false}if(i===-1)return false;else{P=c[b[i]].toString();if(P.length<1||c[b[i]]<1||c[b[i]]>31||c[b[n]]==2&&c[b[i]]>(c[b[f]]%4===0&&(c[b[f]]%100!==0||c[b[f]]%
400===0)?29:28)||c[b[i]]>k[c[b[n]]])return false}return true},isEmpty:function(b){return b.match(/^\s+$/)||b===""?true:false},checkTime:function(b){var d=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!this.isEmpty(b))if(b=b.match(d)){if(b[3]){if(b[1]<1||b[1]>12)return false}else if(b[1]>23)return false;if(b[2]>59)return false}else return false;return true},checkValues:function(b,d,c,f,g){var i,n;if(typeof f==="undefined")if(typeof d=="string"){f=0;for(g=c.p.colModel.length;f<g;f++)if(c.p.colModel[f].name==d){i=
c.p.colModel[f].editrules;d=f;try{n=c.p.colModel[f].formoptions.label}catch(k){}break}}else{if(d>=0)i=c.p.colModel[d].editrules}else{i=f;n=g===undefined?"_":g}if(i){n||(n=c.p.colNames[d]);if(i.required===true)if(this.isEmpty(b))return[false,n+": "+a.jgrid.edit.msg.required,""];f=i.required===false?false:true;if(i.number===true)if(!(f===false&&this.isEmpty(b)))if(isNaN(b))return[false,n+": "+a.jgrid.edit.msg.number,""];if(typeof i.minValue!="undefined"&&!isNaN(i.minValue))if(parseFloat(b)<parseFloat(i.minValue))return[false,
n+": "+a.jgrid.edit.msg.minValue+" "+i.minValue,""];if(typeof i.maxValue!="undefined"&&!isNaN(i.maxValue))if(parseFloat(b)>parseFloat(i.maxValue))return[false,n+": "+a.jgrid.edit.msg.maxValue+" "+i.maxValue,""];if(i.email===true)if(!(f===false&&this.isEmpty(b))){g=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;
if(!g.test(b))return[false,n+": "+a.jgrid.edit.msg.email,""]}if(i.integer===true)if(!(f===false&&this.isEmpty(b))){if(isNaN(b))return[false,n+": "+a.jgrid.edit.msg.integer,""];if(b%1!==0||b.indexOf(".")!=-1)return[false,n+": "+a.jgrid.edit.msg.integer,""]}if(i.date===true)if(!(f===false&&this.isEmpty(b))){d=c.p.colModel[d].formatoptions&&c.p.colModel[d].formatoptions.newformat?c.p.colModel[d].formatoptions.newformat:c.p.colModel[d].datefmt||"Y-m-d";if(!this.checkDate(d,b))return[false,n+": "+a.jgrid.edit.msg.date+
" - "+d,""]}if(i.time===true)if(!(f===false&&this.isEmpty(b)))if(!this.checkTime(b))return[false,n+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(i.url===true)if(!(f===false&&this.isEmpty(b))){g=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!g.test(b))return[false,n+": "+a.jgrid.edit.msg.url,""]}if(i.custom===true)if(!(f===false&&this.isEmpty(b)))if(a.isFunction(i.custom_func)){b=i.custom_func.call(c,b,n);return a.isArray(b)?
b:[false,a.jgrid.edit.msg.customarray,""]}else return[false,a.jgrid.edit.msg.customfcheck,""]}return[true,"",""]}})})(jQuery);
(function(a){a.fn.jqFilter=function(b){if(typeof b==="string"){var d=a.fn.jqFilter[b];if(!d)throw"jqFilter - No such method: "+b;var c=a.makeArray(arguments).slice(1);return d.apply(this,c)}var f=a.extend(true,{filter:null,columns:[],onChange:null,checkValues:null,error:false,errmsg:"",errorcheck:true,showQuery:true,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",
operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",
description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],_gridsopt:[],groupOps:["AND","OR"],groupButton:true},b||{});return this.each(function(){if(!this.filter){this.p=f;if(this.p.filter===null||this.p.filter===undefined)this.p.filter={groupOp:this.p.groupOps[0],
rules:[],groups:[]};var g,i=this.p.columns.length,n,k=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(g=0;g<this.p._gridsopt.length;g++)this.p.ops[g].description=this.p._gridsopt[g];this.p.initFilter=a.extend(true,{},this.p.filter);if(i){for(g=0;g<i;g++){n=this.p.columns[g];if(n.stype)n.inputtype=n.stype;else if(!n.inputtype)n.inputtype="text";if(n.sorttype)n.searchtype=n.sorttype;else if(!n.searchtype)n.searchtype="string";if(n.hidden===undefined)n.hidden=false;if(!n.label)n.label=
n.name;if(n.index)n.name=n.index;if(!n.hasOwnProperty("searchoptions"))n.searchoptions={};if(!n.hasOwnProperty("searchrules"))n.searchrules={}}this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;'><tbody><tr><td class='query'></td></tr></tbody></table>");var P=function(s,I){var m=[true,""];if(a.isFunction(I.searchrules))m=I.searchrules(s,I);else if(a.jgrid&&a.jgrid.checkValues)try{m=a.jgrid.checkValues(s,-1,
null,I.searchrules,I.label)}catch(K){}if(m&&m.length&&m[0]===false){f.error=!m[0];f.errmsg=m[1]}};this.onchange=function(){this.p.error=false;this.p.errmsg="";return a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):false};this.reDraw=function(){a("table.group:first",this).remove();var s=this.createTableForGroup(f.filter,null);a(this).append(s)};this.createTableForGroup=function(s,I){var m=this,K,L=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>");
I===null&&a(L).append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='left'></th></tr>");var Y=a("<tr></tr>");a(L).append(Y);var ba=a("<th colspan='5' align='left'></th>");Y.append(ba);var ca=a("<select class='opsel'></select>");ba.append(ca);Y="";var Ca;for(K=0;K<f.groupOps.length;K++){Ca=s.groupOp===m.p.groupOps[K]?" selected='selected'":"";Y+="<option value='"+m.p.groupOps[K]+"'"+Ca+">"+m.p.groupOps[K]+"</option>"}ca.append(Y).bind("change",function(){s.groupOp=
a(ca).val();m.onchange()});Y="<span></span>";if(this.p.groupButton){Y=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>");Y.bind("click",function(){if(s.groups===undefined)s.groups=[];s.groups.push({groupOp:f.groupOps[0],rules:[],groups:[]});m.reDraw();m.onchange();return false})}ba.append(Y);Y=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>");var Ea;Y.bind("click",function(){if(s.rules===undefined)s.rules=[];for(K=0;K<m.p.columns.length;K++){var Da=
typeof m.p.columns[K].search==="undefined"?true:m.p.columns[K].search,Pa=m.p.columns[K].hidden===true;if(m.p.columns[K].searchoptions.searchhidden===true&&Da||Da&&!Pa){Ea=m.p.columns[K];break}}s.rules.push({field:Ea.name,op:(Ea.searchoptions.sopt?Ea.searchoptions.sopt:m.p.sopt?m.p.sopt:Ea.searchtype==="string"?m.p.stropts:m.p.numopts)[0],data:""});m.reDraw();return false});ba.append(Y);if(I!==null){Y=a("<input type='button' value='-' title='Delete group' class='delete-group'/>");ba.append(Y);Y.bind("click",
function(){for(K=0;K<I.groups.length;K++)if(I.groups[K]===s){I.groups.splice(K,1);break}m.reDraw();m.onchange();return false})}if(s.groups!==undefined)for(K=0;K<s.groups.length;K++){ba=a("<tr></tr>");L.append(ba);Y=a("<td class='first'></td>");ba.append(Y);Y=a("<td colspan='4'></td>");Y.append(this.createTableForGroup(s.groups[K],s));ba.append(Y)}if(s.groupOp===undefined)s.groupOp=m.p.groupOps[0];if(s.rules!==undefined)for(K=0;K<s.rules.length;K++)L.append(this.createTableRowForRule(s.rules[K],s));
return L};this.createTableRowForRule=function(s,I){var m=this,K=a("<tr></tr>"),L,Y,ba,ca,Ca="",Ea;K.append("<td class='first'></td>");var Da=a("<td class='columns'></td>");K.append(Da);var Pa=a("<select></select>"),Ha,Ra=[];Da.append(Pa);Pa.bind("change",function(){s.field=a(Pa).val();ba=a(this).parents("tr:first");for(L=0;L<m.p.columns.length;L++)if(m.p.columns[L].name===s.field){ca=m.p.columns[L];break}if(ca){ca.searchoptions.id=a.jgrid.randId();if(k&&ca.inputtype==="text")if(!ca.searchoptions.size)ca.searchoptions.size=
10;var La=a.jgrid.createEl(ca.inputtype,ca.searchoptions,"",true,m.p.ajaxSelectOptions,true);a(La).addClass("input-elm");Y=ca.searchoptions.sopt?ca.searchoptions.sopt:m.p.sopt?m.p.sopt:ca.searchtype==="string"?m.p.stropts:m.p.numopts;var Ta="",Ya="";Ra=[];a.each(m.p.ops,function(){Ra.push(this.name)});for(L=0;L<Y.length;L++){Ha=a.inArray(Y[L],Ra);if(Ha!==-1){Ya="";if(L===0){s.op=m.p.ops[Ha].name;Ya=" selected='selected'"}Ta+="<option value='"+m.p.ops[Ha].name+"'"+Ya+">"+m.p.ops[Ha].description+"</option>"}}a(".selectopts",
ba).empty().append(Ta);a(".data",ba).empty().append(La);a(".input-elm",ba).bind("change",function(){s.data=a(this).val();m.onchange()});setTimeout(function(){s.data=a(La).val();m.onchange()},0)}});for(L=Da=0;L<m.p.columns.length;L++){Ea=typeof m.p.columns[L].search==="undefined"?true:m.p.columns[L].search;var cb=m.p.columns[L].hidden===true;if(m.p.columns[L].searchoptions.searchhidden===true&&Ea||Ea&&!cb){Ea="";if(s.field===m.p.columns[L].name){Ea=" selected='selected'";Da=L}Ca+="<option value='"+
m.p.columns[L].name+"'"+Ea+">"+m.p.columns[L].label+"</option>"}}Pa.append(Ca);Ca=a("<td class='operators'></td>");K.append(Ca);ca=f.columns[Da];ca.searchoptions.id=a.jgrid.randId();if(k&&ca.inputtype==="text")if(!ca.searchoptions.size)ca.searchoptions.size=10;Da=a.jgrid.createEl(ca.inputtype,ca.searchoptions,s.data,true,m.p.ajaxSelectOptions,true);var Sa=a("<select class='selectopts'></select>");Ca.append(Sa);Sa.bind("change",function(){s.op=a(Sa).val();ba=a(this).parents("tr:first");var La=a(".input-elm",
ba)[0];if(s.op==="nu"||s.op==="nn"){s.data="";La.value="";La.setAttribute("readonly","true");La.setAttribute("disabled","true")}else{La.removeAttribute("readonly");La.removeAttribute("disabled")}m.onchange()});Y=ca.searchoptions.sopt?ca.searchoptions.sopt:m.p.sopt?m.p.sopt:ca.searchtype==="string"?f.stropts:m.p.numopts;Ca="";a.each(m.p.ops,function(){Ra.push(this.name)});for(L=0;L<Y.length;L++){Ha=a.inArray(Y[L],Ra);if(Ha!==-1){Ea=s.op===m.p.ops[Ha].name?" selected='selected'":"";Ca+="<option value='"+
m.p.ops[Ha].name+"'"+Ea+">"+m.p.ops[Ha].description+"</option>"}}Sa.append(Ca);Ca=a("<td class='data'></td>");K.append(Ca);Ca.append(Da);a(Da).addClass("input-elm").bind("change",function(){s.data=a(this).val();m.onchange()});Ca=a("<td></td>");K.append(Ca);Da=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");Ca.append(Da);Da.bind("click",function(){for(L=0;L<I.rules.length;L++)if(I.rules[L]===s){I.rules.splice(L,1);break}m.reDraw();m.onchange();return false});return K};
this.getStringForGroup=function(s){var I="(",m;if(s.groups!==undefined)for(m=0;m<s.groups.length;m++){if(I.length>1)I+=" "+s.groupOp+" ";try{I+=this.getStringForGroup(s.groups[m])}catch(K){alert(K)}}if(s.rules!==undefined)try{for(m=0;m<s.rules.length;m++){if(I.length>1)I+=" "+s.groupOp+" ";I+=this.getStringForRule(s.rules[m])}}catch(L){alert(L)}I+=")";return I==="()"?"":I};this.getStringForRule=function(s){var I="",m="",K,L;for(K=0;K<this.p.ops.length;K++)if(this.p.ops[K].name===s.op){I=this.p.ops[K].operator;
m=this.p.ops[K].name;break}for(K=0;K<this.p.columns.length;K++)if(this.p.columns[K].name===s.field){L=this.p.columns[K];break}K=s.data;if(m==="bw"||m==="bn")K+="%";if(m==="ew"||m==="en")K="%"+K;if(m==="cn"||m==="nc")K="%"+K+"%";if(m==="in"||m==="ni")K=" ("+K+")";f.errorcheck&&P(s.data,L);return a.inArray(L.searchtype,["int","integer","float","number","currency"])!==-1||m==="nn"||m==="nu"?s.field+" "+I+" "+K:s.field+" "+I+' "'+K+'"'};this.resetFilter=function(){this.p.filter=a.extend(true,{},this.p.initFilter);
this.reDraw();this.onchange()};this.hideError=function(){a("th.ui-state-error",this).html("");a("tr.error",this).hide()};this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg);a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){function s(m){var K="(",L;if(m.groups!==undefined)for(L=0;L<m.groups.length;L++){if(K.length>1)K+=m.groupOp==="OR"?" || ":" && ";K+=s(m.groups[L])}if(m.rules!==undefined)for(L=
0;L<m.rules.length;L++){if(K.length>1)K+=m.groupOp==="OR"?" || ":" && ";var Y=m.rules[L];if(I.p.errorcheck){var ba=void 0,ca=void 0;for(ba=0;ba<I.p.columns.length;ba++)if(I.p.columns[ba].name===Y.field){ca=I.p.columns[ba];break}ca&&P(Y.data,ca)}K+=Y.op+"(item."+Y.field+",'"+Y.data+"')"}K+=")";return K==="()"?"":K}var I=this;return s(this.p.filter)};this.reDraw();if(this.p.showQuery)this.onchange();this.filter=true}}})};a.extend(a.fn.jqFilter,{toSQLString:function(){var b="";this.each(function(){b=
this.toUserFriendlyString()});return b},filterData:function(){var b;this.each(function(){b=this.p.filter});return b},getParameter:function(b){if(b!==undefined)if(this.p.hasOwnProperty(b))return this.p[b];return this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(b){if(typeof b==="string")b=jQuery.jgrid.parse(b);this.each(function(){this.p.filter=b;this.reDraw();this.onchange()})}})})(jQuery);
var xmlJsonClass={xml2json:function(a,b){if(a.nodeType===9)a=a.documentElement;var d=this.toJson(this.toObj(this.removeWhite(a)),a.nodeName,"\t");return"{\n"+b+(b?d.replace(/\t/g,b):d.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var d=function(g,i,n){var k="",P,s;if(g instanceof Array)if(g.length===0)k+=n+"<"+i+">__EMPTY_ARRAY_</"+i+">\n";else{P=0;for(s=g.length;P<s;P+=1){var I=n+d(g[P],i,n+"\t")+"\n";k+=I}}else if(typeof g==="object"){P=false;k+=n+"<"+i;for(s in g)if(g.hasOwnProperty(s))if(s.charAt(0)===
"@")k+=" "+s.substr(1)+'="'+g[s].toString()+'"';else P=true;k+=P?">":"/>";if(P){for(s in g)if(g.hasOwnProperty(s))if(s==="#text")k+=g[s];else if(s==="#cdata")k+="<![CDATA["+g[s]+"]]\>";else if(s.charAt(0)!=="@")k+=d(g[s],s,n+"\t");k+=(k.charAt(k.length-1)==="\n"?n:"")+"</"+i+">"}}else k+=typeof g==="function"?n+"<"+i+"><![CDATA["+g+"]]\></"+i+">":g.toString()==='""'||g.toString().length===0?n+"<"+i+">__EMPTY_STRING_</"+i+">":n+"<"+i+">"+g.toString()+"</"+i+">";return k},c="",f;for(f in a)if(a.hasOwnProperty(f))c+=
d(a[f],f,"");return b?c.replace(/\t/g,b):c.replace(/\t|\n/g,"")},toObj:function(a){var b={},d=/function/i;if(a.nodeType===1){if(a.attributes.length){var c;for(c=0;c<a.attributes.length;c+=1)b["@"+a.attributes[c].nodeName]=(a.attributes[c].nodeValue||"").toString()}if(a.firstChild){var f=c=0,g=false,i;for(i=a.firstChild;i;i=i.nextSibling)if(i.nodeType===1)g=true;else if(i.nodeType===3&&i.nodeValue.match(/[^ \f\n\r\t\v]/))c+=1;else if(i.nodeType===4)f+=1;if(g)if(c<2&&f<2){this.removeWhite(a);for(i=
a.firstChild;i;i=i.nextSibling)if(i.nodeType===3)b["#text"]=this.escape(i.nodeValue);else if(i.nodeType===4)if(d.test(i.nodeValue))b[i.nodeName]=[b[i.nodeName],i.nodeValue];else b["#cdata"]=this.escape(i.nodeValue);else if(b[i.nodeName])if(b[i.nodeName]instanceof Array)b[i.nodeName][b[i.nodeName].length]=this.toObj(i);else b[i.nodeName]=[b[i.nodeName],this.toObj(i)];else b[i.nodeName]=this.toObj(i)}else if(a.attributes.length)b["#text"]=this.escape(this.innerXml(a));else b=this.escape(this.innerXml(a));
else if(c)if(a.attributes.length)b["#text"]=this.escape(this.innerXml(a));else{b=this.escape(this.innerXml(a));if(b==="__EMPTY_ARRAY_")b="[]";else if(b==="__EMPTY_STRING_")b=""}else if(f)if(f>1)b=this.escape(this.innerXml(a));else for(i=a.firstChild;i;i=i.nextSibling)if(d.test(a.firstChild.nodeValue)){b=a.firstChild.nodeValue;break}else b["#cdata"]=this.escape(i.nodeValue)}if(!a.attributes.length&&!a.firstChild)b=null}else if(a.nodeType===9)b=this.toObj(a.documentElement);else alert("unhandled node type: "+
a.nodeType);return b},toJson:function(a,b,d,c){if(c===undefined)c=true;var f=b?'"'+b+'"':"",g="\t",i="\n";if(!c)i=g="";if(a==="[]")f+=b?":[]":"[]";else if(a instanceof Array){var n,k,P=[];k=0;for(n=a.length;k<n;k+=1)P[k]=this.toJson(a[k],"",d+g,c);f+=(b?":[":"[")+(P.length>1?i+d+g+P.join(","+i+d+g)+i+d:P.join(""))+"]"}else if(a===null)f+=(b&&":")+"null";else if(typeof a==="object"){n=[];for(k in a)if(a.hasOwnProperty(k))n[n.length]=this.toJson(a[k],k,d+g,c);f+=(b?":{":"{")+(n.length>1?i+d+g+n.join(","+
i+d+g)+i+d:n.join(""))+"}"}else f+=typeof a==="string"?(b&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(b&&":")+'"'+a.toString()+'"';return f},innerXml:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var d=function(c){var f="",g;if(c.nodeType===1){f+="<"+c.nodeName;for(g=0;g<c.attributes.length;g+=1)f+=" "+c.attributes[g].nodeName+'="'+(c.attributes[g].nodeValue||"").toString()+'"';if(c.firstChild){f+=">";for(g=c.firstChild;g;g=g.nextSibling)f+=d(g);f+="</"+c.nodeName+">"}else f+=
"/>"}else if(c.nodeType===3)f+=c.nodeValue;else if(c.nodeType===4)f+="<![CDATA["+c.nodeValue+"]]\>";return f};for(a=a.firstChild;a;a=a.nextSibling)b+=d(a)}return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var b;for(b=a.firstChild;b;)if(b.nodeType===3)if(b.nodeValue.match(/[^ \f\n\r\t\v]/))b=b.nextSibling;else{var d=b.nextSibling;a.removeChild(b);b=d}else{b.nodeType===1&&this.removeWhite(b);
b=b.nextSibling}return a}};
(function(a){a.jqschedule={calendarid:"#calendar",eventid:"#event",calendarurl:"",locales:{dateFormat:"dd/MM/yyyy",bSave:"Save",bAdd:"Add",bDelete:"Delete",bCancel:"Cancel",bChange:"Change",bClose:"Close",bSearch:"Find",editCaption:"Edit event",addCaption:"Add new event",userCaption:"Change Calendar",searchCaption:"Advanced search"},searchCols:[],searchOpers:[],gotoDayEventView:function(b){a("#b_search_cal").trigger("click");b=a.fullCalendar.parseDate(parseInt(b,10));a(a.jqschedule.calendarid).fullCalendar("gotoDate",b.getFullYear(),
b.getMonth(),b.getDate());a(a.jqschedule.calendarid).fullCalendar("changeView","agendaDay")},eventEditDialog:function(b){var d=a(a.jqschedule.eventid);a("input,textarea,select",d).val("");b.allDay?a("#endtime, #starttime",d).hide():a("#endtime, #starttime",d).show();a("#all_day",d).attr("checked",b.allDay);a("#title",d).val(b.title);setTimeout(function(){a("#description",d).val(b.description)},100);a("#location",d).val(b.location);a("#categories",d).val(b.className);a("#access",d).val(b.access);a("#start",
d).val(a.fullCalendar.formatDate(b.start,a.jqschedule.locales.dateFormat));a("#starttime",d).val(a.fullCalendar.formatDate(b.start,"HH:mm"));a("#end",d).val(a.fullCalendar.formatDate(b.end?b.end:b.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(b.end?b.end:b.start,"HH:mm"));a("#user_id",d).val(b.user_id);var c={},f=a("#start",d).datepicker("option","dateFormat"),g;c[a.jqschedule.locales.bSave]=function(){var i=a.datepicker.parseDate(f,a("#start",d).val()),n=a("#starttime",
d).val();n=n?n.split(":"):["0","0"];i.setHours(parseInt(n[0],10),parseInt(n[1],10));(n=a.datepicker.parseDate(f,a("#end",d).val()))||(n=a.datepicker.parseDate(f,a("#start",d).val()));var k=a("#endtime",d).val();k=k?k.split(":"):["0","0"];n.setHours(parseInt(k[0],10),parseInt(k[1],10));if(n.getTime()-i.getTime()<0)alert("End time is little than start time");else{b.start=i;b._start=i;b.end=n;b._end=n;b.allDay=a("#all_day",d).attr("checked")?true:false;b.title=a("#title",d).val();if(a.trim(b.title)==
"")alert("Title is required");else{b.description=a("#description",d).val();b.location=a("#location",d).val();b.className=a("#categories",d).val();b.access=a("#access",d).val();b.user_id=a("#user_id",d).val();g={};g.event_id=b.id;g.start=b.start.getTime()/1E3;g.end=b.end.getTime()/1E3;g.title=b.title;g.description=b.description;g.location=b.location;g.categories=a("#categories",d).val();g.access=b.access;g.user_id=b.user_id;g.all_day=b.allDay?1:0;g.oper="editEvent";a.ajax({url:a.jqschedule.calendarurl,
data:g,dataType:"json",type:"post",success:function(){a(a.jqschedule.calendarid).fullCalendar("updateEvent",b);d.dialog("close")}})}}};c[a.jqschedule.locales.bDelete]=function(){g={};g.event_id=b.id;g.oper="removeEvent";a.ajax({url:a.jqschedule.calendarurl,data:g,dataType:"json",type:"post"});a(a.jqschedule.calendarid).fullCalendar("removeEvents",b.id);d.dialog("close")};c[a.jqschedule.locales.bCancel]=function(){d.dialog("close")};d.dialog({modal:true,width:490,closeOnEscape:false,position:{at:"center bottom",
of:a.jqschedule.calendarid},title:a.jqschedule.locales.editCaption,close:function(){d.dialog("destroy");d.hide();d=null},buttons:c}).show();a(".ui-dialog").css("font-size","12px");return false},eventViewDialog:function(b){var d=a(a.jqschedule.eventid);a("input,textarea,select",d).val("");b.allDay?a("#endtime, #starttime",d).hide():a("#endtime, #starttime",d).show();a("#all_day",d).attr("checked",b.allDay);a("#title",d).val(b.title);setTimeout(function(){a("#description",d).val(b.description)},100);
a("#location",d).val(b.location);a("#categories",d).val(b.className);a("#access",d).val(b.access);a("#start",d).val(a.fullCalendar.formatDate(b.start,a.jqschedule.locales.dateFormat));a("#starttime",d).val(a.fullCalendar.formatDate(b.start,"HH:mm"));a("#end",d).val(a.fullCalendar.formatDate(b.end?b.end:b.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(b.end?b.end:b.start,"HH:mm"));a("#user_id",d).val(b.user_id);var c={};c[a.jqschedule.locales.bClose]=function(){d.dialog("close")};
d.dialog({modal:true,width:490,closeOnEscape:false,position:{at:"center bottom",of:a.jqschedule.calendarid},title:a.jqschedule.locales.editCaption,close:function(){d.dialog("destroy");d.hide();d=null},buttons:c}).show();a(".ui-dialog").css("font-size","12px");return false},eventAddDialog:function(b,d){var c=a(a.jqschedule.eventid);a("input,textarea,select",c).val("");d?a("#endtime, #starttime",c).hide():a("#endtime, #starttime",c).show();a("#all_day",c).attr("checked",d);setTimeout(function(){a("#description",
c).val("")},100);a("#start",c).val(a.fullCalendar.formatDate(b,a.jqschedule.locales.dateFormat));a("#starttime",c).val(a.fullCalendar.formatDate(b,"HH:mm"));a("#end",c).val(a.fullCalendar.formatDate(b,a.jqschedule.locales.dateFormat));a("#endtime",c).val(a.fullCalendar.formatDate(b,"HH:mm"));var f=a("#switchuser").val();if(a.isArray(f))f=f[0];a("#user_id",c).val(f);f={};var g=a("#start",c).datepicker("option","dateFormat"),i,n;f[a.jqschedule.locales.bAdd]=function(){n={};var k=a.datepicker.parseDate(g,
a("#start",c).val()),P=a("#starttime",c).val();P=P?P.split(":"):["0","0"];k.setHours(parseInt(P[0],10),parseInt(P[1],10));(P=a.datepicker.parseDate(g,a("#end",c).val()))||(P=a.datepicker.parseDate(g,a("#start",c).val()));var s=a("#endtime").val();s=s?s.split(":"):["0","0"];P.setHours(parseInt(s[0],10),parseInt(s[1],10));if(P.getTime()-k.getTime()<0)alert("End time is little than start time");else{n.start=k;n._start=k;n.end=P;n._end=P;n.allDay=a("#all_day",c).attr("checked")?true:false;n.title=a("#title",
c).val();if(a.trim(n.title)=="")alert("Title is required");else{n.description=a("#description",c).val();n.location=a("#location",c).val();n.className=a("#categories",c).val();n.access=a("#access",c).val();n.user_id=a("#user_id",c).val();i={};i.start=n.start.getTime()/1E3;i.end=n.end.getTime()/1E3;i.title=n.title;i.description=n.description;i.location=n.location;i.categories=a("#categories",c).val();i.access=n.access;i.user_id=n.user_id;i.all_day=n.allDay?1:0;i.oper="newEvent";a.ajax({url:a.jqschedule.calendarurl,
data:i,dataType:"json",type:"POST",success:function(I){if(I.event_id){n.id=I.event_id;n._id=I.event_id;a(a.jqschedule.calendarid).fullCalendar("renderEvent",n,false);c.dialog("close")}}})}}};f[a.jqschedule.locales.bCancel]=function(){c.dialog("close")};c.dialog({modal:true,width:490,position:{at:"center bottom",of:a.jqschedule.calendarid},closeOnEscape:false,title:a.jqschedule.locales.addCaption,close:function(){c.dialog("destroy");c.hide();c=null},buttons:f}).show();a(".ui-dialog").css("font-size",
"12px")},eventLoading:function(b){if(b){b=a(".calwrapper").width();var d=a(".calwrapper").height()+10;a("body").append('<div class="ui-widget-overlay" style="width:'+b+"px;height:"+d+'px;z-index: 1001;"></div>');a("#progresspar").show()}else{a(".ui-widget-overlay").remove();a("#progresspar").hide()}},eventDrop:function(b,d,c,f){if(b.end==null)b.end=b.start;a.ajax({url:a.jqschedule.calendarurl,data:{oper:"moveEvent",event_id:b.id,start:b.start.getTime()/1E3,end:b.end.getTime()/1E3,all_day:f?1:0},dataType:"json",
type:"post"})},eventResize:function(b){a.ajax({url:a.jqschedule.calendarurl,data:{oper:"resizeEvent",event_id:b.id,start:b.start.getTime()/1E3,end:b.end.getTime()/1E3},dataType:"json",type:"post"})},eventRender:function(b,d){try{b.description&&d.tooltip({position:{my:"left bottom",at:"center top",offset:"-30 -10",of:d},content:function(){return b.description}})}catch(c){}},changeCalendarUser:function(){var b=a("#caluser");b.dialog({modal:true,width:400,title:a.jqschedule.locales.userCaption,close:function(){b.dialog("destroy");
b.hide();b=null},buttons:[{text:a.jqschedule.locales.bChange,click:function(){var d=a("#switchuser",this).val();a.ajax({url:a.jqschedule.calendarurl,data:{_user_id:d,oper:"switchUser"},dataType:"json",type:"post",success:function(){a(a.jqschedule.calendarid).fullCalendar("refetchEvents");a("#common_search").val("");a(".fnd-results").html("");a("#search_table").empty();var c=a("#switchuser option:selected");if(c.length<=1)a("#cal_user").html("<li>"+c.text()+"</li>");else{var f="";a.each(c,function(){f+=
"<li>"+a(this).text()+"</li>"});a("#cal_user").html(f)}}});b.dialog("close")}},{text:a.jqschedule.locales.bCancel,click:function(){b.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css("font-size","12px");return false},printEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var b=a("#common_search").val(),d="simple";if(b==""){d="complex";var c=a("#search_cal");if(c){c=c.jqFilter("filterData");if(!c.rules.length)return false;try{b=xmlJsonClass.toJson(c,"","",false)}catch(f){try{b=
JSON.stringify(c)}catch(g){}}}}window.location=a.jqschedule.calendarurl+"?oper=printEvents&stype="+d+"&search=true&svalue="+b}else{d=jQuery(a.jqschedule.calendarid).fullCalendar("getView");b=d.start.getTime()/1E3;d=d.end.getTime()/1E3;window.location=a.jqschedule.calendarurl+"?oper=printEvents&start="+b+"&end="+d}return false},exportEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var b=a("#common_search").val(),d="simple";if(b==""){d="complex";var c=a("#search_cal");if(c){c=c.jqFilter("filterData");
if(!c.rules.length)return false;try{b=xmlJsonClass.toJson(c,"","",false)}catch(f){try{b=JSON.stringify(c)}catch(g){}}}}window.location=a.jqschedule.calendarurl+"?oper=exportEvents&stype="+d+"&search=true&svalue="+b}else{d=jQuery(a.jqschedule.calendarid).fullCalendar("getView");b=d.start.getTime()/1E3;d=d.end.getTime()/1E3;window.location=a.jqschedule.calendarurl+"?oper=exportEvents&start="+b+"&end="+d}return false},showSearch:function(){if(a("#common_search").val()){a("#common_search").val("");a("#b_common_search").trigger("click")}a(this).addClass("ui-state-active");
a(".fc-view-agendaWeek, .fc-view-agendaDay, .fc-view-basicDay, .fc-view-basickWeek, .fc-view-month, .fc-view-year").hide();a(".fc-view-search").show();a("#common_search").focus()},hideSearch:function(){a(this).removeClass("ui-state-active");var b=a(a.jqschedule.calendarid).fullCalendar("getView").name;a(".fc-view-search").hide();a(".fc-view-"+b).show()},_filSearchTable:function(b,d){a(d).empty();if(b&&b.length){a(".fnd-results").html(b.length);var c="";a.each(b,function(){var f=a.fullCalendar.parseDate(this.start),
g=a.fullCalendar.parseDate(this.end),i=a.fullCalendar.formatDate(f,"HH:mm"),n=a.fullCalendar.formatDate(g,"HH:mm");i=this.allDay?"all day":i+" - "+n;f=a.fullCalendar.formatDate(f,"ddd  dd MMM yyyy");g=a.fullCalendar.formatDate(g,"ddd  dd MMM yyyy");if(f!=g)i+=" "+g;c+="<tr id='"+this.id+"'><th class='ui-event-cell ui-widget-content'><a href=\"javascript:jQuery.jqschedule.gotoDayEventView('"+this.start+"');\">"+f+"</a></th><td class='ui-event-time ui-widget-content'>"+i+"</td><td class='ui-event-title ui-widget-content'><a href=\"javascript:jQuery.jqschedule.editFromSearch('"+
this.id+"');\" class='' style='border: 0px none;text-decoration:  underline;'>"+this.title+"</a></td>";c+="<td class='source' style='display:none;'>";c+=this.id+"~`"+this.title+"~`"+this.start+"~`"+this.end+"~`"+this.description+"~`"+this.location+"~`"+this.className+"~`"+this.access+"~`"+this.allDay+"~`"+this.user_id;c+="</td>";c+="</tr>"});a(d).append(c)}},doSimpleSearch:function(){var b=a("#common_search").val();if(b)a.ajax({url:a.jqschedule.calendarurl,data:{search:true,stype:"simple",svalue:b,
oper:"getEvent"},dataType:"json",type:"POST",success:function(d){a.jqschedule._filSearchTable(d,"#search_table")}});else{a(".fnd-results").html("");a("#search_table").empty()}},buildLocalSearch:function(){var b,d;a("label",a.jqschedule.eventid).each(function(c){b={};b.name=a(this).attr("for");b.label=a(this).html();if(b.name=="categories"||b.name=="access"){b.inputtype="select";d={};a("#"+b.name+" option",a.jqschedule.eventid).each(function(){d[a(this).val()]=a(this).text()});b.searchoptions={value:d}}else if(b.name==
"all_day"){b.inputtype="select";d={"1":"Yes","0":"No"};b.searchoptions={value:d}}else if(b.name=="start"||b.name=="end"){b.searchtype="date";b.searchoptions={size:20,sopt:["eq","gt","ge","lt","le"],dataInit:function(f){a(f).datetimepicker()}}}else b.searchoptions={size:20};a.jqschedule.searchCols[c]=b})},advancedSearchDlg:function(){a("#search_cal").jqFilter({columns:a.jqschedule.searchCols,filter:{groupOp:"AND",rules:[{field:a.jqschedule.searchCols[0].name,op:"eq",data:""}]},_gridsopt:a.jqschedule.searchOpers});
a("#search_cal").dialog({modal:true,width:"auto",autoOpen:false,title:a.jqschedule.locales.searchCaption,close:function(){},buttons:[{text:a.jqschedule.locales.bSearch,click:function(){var b=a("#search_cal"),d,c=b.jqFilter("filterData");if(c.rules.length){try{d=xmlJsonClass.toJson(c,"","",false)}catch(f){try{d=JSON.stringify(c)}catch(g){}}d&&a.ajax({url:a.jqschedule.calendarurl,data:{search:true,stype:"complex",svalue:d,oper:"getEvent"},dataType:"json",type:"POST",success:function(i){a.jqschedule._filSearchTable(i,
"#search_table")}});b.dialog("close")}}},{text:a.jqschedule.locales.bClose,click:function(){a("#search_cal").dialog("close")}}]});a(".ui-dialog, .ui-dialog-buttonpane").css("font-size","12px")},editFromSearch:function(b){var d=a("tr#"+b+" td.source").html().split("~`"),c={};a.each(["id","title","start","end","description","location","className","access","allDay","user_id"],function(f){if(this=="start"||this=="end")d[f]=new Date(parseFloat(d[f])*1E3);if(this=="allDay")d[f]=d[f]=="1"?true:false;c[this]=
d[f]});a.jqschedule.eventViewDialog(c)},openDaySearchDlg:function(b){var d=b.getTime()/1E3;b.setHours(23);b.setMinutes(23);var c=b.getTime()/1E3,f=a("#day_dialog");f.dialog({modal:true,width:450,close:function(){f.dialog("destroy");f.hide();f=null},open:function(){a("#day_table").empty();a.ajax({url:a.jqschedule.calendarurl,data:{oper:"getEvent",start:d,end:c},dataType:"json",type:"POST",success:function(g){a.jqschedule._filSearchTable(g,"#day_table")}})},buttons:[{text:a.jqschedule.locales.bClose,
click:function(){f.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css("font-size","12px")},eventsFunc:function(b,d,c){a.ajax({url:a.jqschedule.calendarurl,dataType:"json",type:"POST",data:{oper:"getEvent",start:b.getTime()/1E3,end:d.getTime()/1E3},success:function(f){c(f)}})},processScript:function(){a("#datepicker").datepicker({dateFormat:"yy-mm-dd",onSelect:function(b){b=b.split("-");a(a.jqschedule.calendarid).fullCalendar("gotoDate",parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],
10))}});a("#start, #end",a.jqschedule.eventid).datepicker();a("#all_day",a.jqschedule.eventid).click(function(){this.checked?a("#endtime, #starttime",a.jqschedule.eventid).val("00:00").hide():a("#endtime, #starttime",a.jqschedule.eventid).show()});a(".custbutton").height(a("table.fc-header").height());a("#b_user_change").click(jQuery.jqschedule.changeCalendarUser);a("#b_export_ical").click(jQuery.jqschedule.exportEvents);a("#b_print_cal").click(jQuery.jqschedule.printEvents);a(".fc-content",a.jqschedule.calendarid).append(a(".fc-view-search"));
a("#b_search_cal").toggle(jQuery.jqschedule.showSearch,jQuery.jqschedule.hideSearch);a("#b_common_search").click(jQuery.jqschedule.doSimpleSearch);a("#b_adv_search").click(function(){a("#search_cal").dialog("open");return false});a(".jq-button").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.jqschedule.buildLocalSearch();a.jqschedule.advancedSearchDlg()}}})(jQuery);
